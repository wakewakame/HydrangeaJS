/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dst/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/hydrangea.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/extra/shader_node/frame.js":
/*!****************************************!*\
  !*** ./src/extra/shader_node/frame.js ***!
  \****************************************/
/*! exports provided: FrameNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FrameNode\", function() { return FrameNode; });\n/* harmony import */ var _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gui/templates/node_component.js */ \"./src/gui/templates/node_component.js\");\n/* harmony import */ var _param_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./param.js */ \"./src/extra/shader_node/param.js\");\n\r\n\r\n\r\nconst FrameNode = class extends _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__[\"Node\"] {\r\n\tconstructor(name, x, y) {\r\n\t\tsuper(name, x, y);\r\n\t\tthis.frameBuffer = null;\r\n\t\tthis.inputShaderNodeParam = null;\r\n\t\tthis.outputShaderNodeParam = null;\r\n\t\tthis.previewShader = null;\r\n\t}\r\n\tsetup(){\r\n\t\tsuper.setup();\r\n\t\tthis.inputShaderNodeParam = this.inputs.add(new _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"](\"shader\", \"input\"));\r\n\t\tthis.outputShaderNodeParam = this.outputs.add(new _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"](\"frame\", \"output\"));\r\n\t\tthis.frameBuffer = this.graphics.createFrame(512, 512);\r\n\t\tthis.previewShader = this.graphics.createShader();\r\n\t\tthis.previewShader.loadShader(this.previewShader.default_shader.vertex, `\r\n\t\t\tprecision highp float;\r\n\t\t\tuniform sampler2D texture;\r\n\t\t\tuniform vec2 textureArea;\r\n\t\t\tvarying vec2 vUv;\r\n\t\t\tvarying vec4 vColor;\r\n\r\n\t\t\tvoid main(void){\r\n\t\t\t\tgl_FragColor = texture2D(texture, vUv * textureArea);\r\n\t\t\t}\r\n\t\t`);\r\n\t}\r\n\tdeleted(){\r\n\t\tsuper.deleted();\r\n\t\tthis.frameBuffer.delete();\r\n\t\tthis.previewShader.delete();\r\n\t}\r\n\tjob(){\r\n\t\tsuper.job();\r\n\t\tthis.outputShaderNodeParam.value.texture = this.frameBuffer.texture;\r\n\t\tif (\r\n\t\t\t(this.inputs.childs.length !== 1) ||\r\n\t\t\t(!(this.inputs.childs[0] instanceof _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"])) ||\r\n\t\t\t(this.inputs.childs[0].output === null)\r\n\t\t) return;\r\n\t\tlet shader = this.inputs.childs[0].output.value.shader;\r\n\t\tthis.frameBuffer.beginDraw();\r\n\t\tlet tmp_current_shader = this.graphics.current_shader;\r\n\t\tthis.graphics.shader(shader);\r\n\t\tthis.graphics.rect(0, this.frameBuffer.height, this.frameBuffer.width, -this.frameBuffer.height);\r\n\t\tthis.graphics.shader(tmp_current_shader);\r\n\t\tthis.frameBuffer.endDraw();\r\n\t}\r\n\tupdate(){\r\n\t\tsuper.update();\r\n\t\tif (this.parent.childs[0] === this)\t{\r\n\t\t\tthis.reset();\r\n\t\t\tthis.job();\r\n\t\t}\r\n\t}\r\n\tdraw(){\r\n\t\tsuper.draw();\r\n\t\tlet tmp_current_shader = this.graphics.current_shader;\r\n\t\tthis.graphics.shader(this.previewShader);\r\n\t\tthis.previewShader.set(\"texture\", this.frameBuffer.texture);\r\n\t\tthis.previewShader.set(\r\n\t\t\t\"textureArea\",\r\n\t\t\tthis.frameBuffer.texture.width  / this.frameBuffer.texture.pow2_width,\r\n\t\t\tthis.frameBuffer.texture.height / this.frameBuffer.texture.pow2_height\r\n\t\t);\r\n\t\tthis.graphics.shape(this.inner_shape);\r\n\t\tthis.graphics.shader(tmp_current_shader);\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/extra/shader_node/frame.js?");

/***/ }),

/***/ "./src/extra/shader_node/param.js":
/*!****************************************!*\
  !*** ./src/extra/shader_node/param.js ***!
  \****************************************/
/*! exports provided: ValueNodeParam */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ValueNodeParam\", function() { return ValueNodeParam; });\n/* harmony import */ var _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gui/templates/node_component.js */ \"./src/gui/templates/node_component.js\");\n\r\n\r\nconst ValueNodeParam = class extends _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__[\"NodeParam\"] {\r\n\tconstructor(type, name) {\r\n\t\tsuper(type, name);\r\n\t\tthis.value = {\r\n\t\t\tx: 0.0,\r\n\t\t\ty: 0.0,\r\n\t\t\tz: 0.0,\r\n\t\t\tw: 0.0,\r\n\t\t\tmat: [],\r\n\t\t\ttexture: [],\r\n\t\t\tshader: null\r\n\t\t}\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/extra/shader_node/param.js?");

/***/ }),

/***/ "./src/extra/shader_node/picture.js":
/*!******************************************!*\
  !*** ./src/extra/shader_node/picture.js ***!
  \******************************************/
/*! exports provided: PictureNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PictureNode\", function() { return PictureNode; });\n/* harmony import */ var _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gui/templates/node_component.js */ \"./src/gui/templates/node_component.js\");\n/* harmony import */ var _param_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./param.js */ \"./src/extra/shader_node/param.js\");\n/* harmony import */ var _frame_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./frame.js */ \"./src/extra/shader_node/frame.js\");\n\r\n\r\n\r\n\r\nconst PictureNode = class extends _frame_js__WEBPACK_IMPORTED_MODULE_2__[\"FrameNode\"] {\r\n\tconstructor(name, img_url, x, y) {\r\n\t\tsuper(name, x, y);\r\n\t\tthis.img_url = img_url;\r\n\t\tthis.frameBuffer = null;\r\n\t}\r\n\tsetup(){\r\n\t\tsuper.setup();\r\n\t\tlet img = this.graphics.createTexture(0, 0);\r\n\t\timg.loadImg(this.img_url, () => {\r\n\t\t\tthis.frameBuffer.resize(img.width, img.height);\r\n\t\t\tthis.frameBuffer.beginDraw();\r\n\t\t\tthis.graphics.image(img, 0, 0, img.width, img.height);\r\n\t\t\tthis.frameBuffer.endDraw();\r\n\t\t\tthis.resizeBox.target.y = this.w * img.height / img.width;\r\n\t\t});\r\n\t\tthis.inputs.remove(this.inputShaderNodeParam);\r\n\t\timg.delete();\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/extra/shader_node/picture.js?");

/***/ }),

/***/ "./src/extra/shader_node/shader.js":
/*!*****************************************!*\
  !*** ./src/extra/shader_node/shader.js ***!
  \*****************************************/
/*! exports provided: ShaderNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShaderNode\", function() { return ShaderNode; });\n/* harmony import */ var _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gui/templates/node_component.js */ \"./src/gui/templates/node_component.js\");\n/* harmony import */ var _param_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./param.js */ \"./src/extra/shader_node/param.js\");\n\r\n\r\n\r\nconst ShaderNode = class extends _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__[\"Node\"] {\r\n\tconstructor(name, x, y) {\r\n\t\tsuper(name, x, y);\r\n\t\tthis.shader = null;\r\n\t\tthis.inputFrameNodeParam = null;\r\n\t\tthis.outputFrameNodeParam = null;\r\n\t}\r\n\tsetup(){\r\n\t\tsuper.setup();\r\n\t\tthis.outputFrameNodeParam = this.outputs.add(new _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"](\"shader\", \"output\"));\r\n\t\tthis.shader = this.graphics.createShader();\r\n\t\tthis.shader.loadDefaultShader();\r\n\t}\r\n\tdeleted(){\r\n\t\tsuper.deleted();\r\n\t\tthis.shader.delete();\r\n\t}\r\n\tloadShader(fragmentShader){\r\n\t\tlet result = this.shader.loadShader(this.shader.default_shader.vertex, fragmentShader);\r\n\t\tif (result !== \"\") return result;\r\n\t\tfor(let i of this.inputs.childs) this.inputs.remove(i);\r\n\t\tObject.keys(this.shader.uniforms_type).forEach((key) => {\r\n\t\t\tif (key === \"matrix\") return;\r\n\t\t\tlet type = this.shader.uniforms_type[key];\r\n\t\t\tif (type === \"sampler2D\") {\r\n\t\t\t\tthis.inputs.add(new _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"](\"frame\", key));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.inputs.add(new _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"](type, key));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn \"\";\r\n\t}\r\n\tjob(){\r\n\t\tsuper.job();\r\n\t\tthis.outputFrameNodeParam.value.shader = this.shader;\r\n\t\tfor(let c of this.inputs.childs) {\r\n\t\t\tif(c.output === null) continue;\r\n\t\t\tswitch(c.type){\r\n\t\t\t\tcase \"int\":\r\n\t\t\t\tcase \"float\":\r\n\t\t\t\t\tthis.shader.set(\r\n\t\t\t\t\t\tc.name,\r\n\t\t\t\t\t\tc.output.value.x\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ivec2\":\r\n\t\t\t\tcase \"vec2\":\r\n\t\t\t\t\tthis.shader.set(\r\n\t\t\t\t\t\tc.name,\r\n\t\t\t\t\t\tc.output.value.x,\r\n\t\t\t\t\t\tc.output.value.y\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ivec3\":\r\n\t\t\t\tcase \"vec3\":\r\n\t\t\t\t\tthis.shader.set(\r\n\t\t\t\t\t\tc.name,\r\n\t\t\t\t\t\tc.output.value.x,\r\n\t\t\t\t\t\tc.output.value.y,\r\n\t\t\t\t\t\tc.output.value.z\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"ivec4\":\r\n\t\t\t\tcase \"vec4\":\r\n\t\t\t\t\tthis.shader.set(\r\n\t\t\t\t\t\tc.name,\r\n\t\t\t\t\t\tc.output.value.x,\r\n\t\t\t\t\t\tc.output.value.y,\r\n\t\t\t\t\t\tc.output.value.z,\r\n\t\t\t\t\t\tc.output.value.w\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"mat2\":\r\n\t\t\t\tcase \"mat3\":\r\n\t\t\t\tcase \"mat4\":\r\n\t\t\t\t\tthis.shader.set(\r\n\t\t\t\t\t\tc.name,\r\n\t\t\t\t\t\tc.output.value.mat\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"frame\":\r\n\t\t\t\t\tthis.shader.set(\r\n\t\t\t\t\t\tc.name,\r\n\t\t\t\t\t\tc.output.value.texture\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/extra/shader_node/shader.js?");

/***/ }),

/***/ "./src/extra/shader_node/time.js":
/*!***************************************!*\
  !*** ./src/extra/shader_node/time.js ***!
  \***************************************/
/*! exports provided: TimeNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TimeNode\", function() { return TimeNode; });\n/* harmony import */ var _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../gui/templates/node_component.js */ \"./src/gui/templates/node_component.js\");\n/* harmony import */ var _param_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./param.js */ \"./src/extra/shader_node/param.js\");\n\r\n\r\n\r\nconst TimeNode = class extends _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_0__[\"Node\"] {\r\n\tconstructor(name, x, y) {\r\n\t\tsuper(name, x, y);\r\n\t\tthis.outputFloatNodeParam = null;\t}\r\n\tsetup(){\r\n\t\tsuper.setup();\r\n\t\tthis.outputFloatNodeParam = this.outputs.add(new _param_js__WEBPACK_IMPORTED_MODULE_1__[\"ValueNodeParam\"](\"float\", \"output\"));\r\n\t\tthis.outputFloatNodeParam.value.x = 0.0;\r\n\t}\r\n\tjob(){\r\n\t\tsuper.job();\r\n\t\tthis.outputFloatNodeParam.value.x += 0.01;\r\n\t}\r\n\tupdate(){\r\n\t\tsuper.update();\r\n\t\tif (this.parent.childs[0] === this)\t{\r\n\t\t\tthis.reset();\r\n\t\t\tthis.job();\r\n\t\t}\r\n\t}\r\n\tdraw(){\r\n\t\tsuper.draw();\r\n\t\tthis.graphics.fill(1.0, 0.0, 0.0, 1.0);\r\n\t\tthis.graphics.stroke(0.0, 0.0, 0.0, 0.0);\r\n\t\tthis.graphics.rect(10, 10, 20, 20);\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/extra/shader_node/time.js?");

/***/ }),

/***/ "./src/gui/component/component.js":
/*!****************************************!*\
  !*** ./src/gui/component/component.js ***!
  \****************************************/
/*! exports provided: Component */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component; });\n/* harmony import */ var _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../webgl/utils/math.js */ \"./src/webgl/utils/math.js\");\n\r\n\r\nconst Component = class {\r\n\tconstructor(x, y, w, h) {\r\n\t\tthis.graphics = null;\r\n\t\tthis.parent = null;\r\n\t\tthis.name = \"Empty\";\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.w = w;\r\n\t\tthis.h = h;\r\n\t\tthis.min_w = 0.0;\r\n\t\tthis.min_h = 0.0;\r\n\t\tthis.childs = [];\r\n\t\tthis.dragFlag = false;\r\n\t\tthis.clickFlag = false;\r\n\t\tthis.dragStartCompX = 0.0;\r\n\t\tthis.dragStartCompY = 0.0;\r\n\t}\r\n\tsetup(){}\r\n\tupdate(){}\r\n\tupdate_sub(){\r\n\t\tthis.w = Math.max(this.min_w, this.w);\r\n\t\tthis.h = Math.max(this.min_h, this.h);\r\n\t\tfor(let i = 0; i < this.childs.length; i++){\r\n\t\t\tthis.childs[i].update();\r\n\t\t\tthis.childs[i].update_sub();\r\n\t\t}\r\n\t}\r\n\tdraw(){}\r\n\tdraw_sub(){\r\n\t\tfor(let i = this.childs.length - 1; i >= 0; i--){\r\n\t\t\tthis.graphics.pushMatrix();\r\n\t\t\tthis.graphics.translate(this.childs[i].x, this.childs[i].y);\r\n\t\t\tthis.childs[i].draw();\r\n\t\t\tthis.childs[i].draw_sub();\r\n\t\t\tthis.graphics.popMatrix();\r\n\t\t}\r\n\t}\r\n\tdeleted() {}\r\n\tadd(child){\r\n\t\tthis.childs.push(child);\r\n\t\tchild.graphics = this.graphics;\r\n\t\tchild.parent = this;\r\n\t\tchild.setup();\r\n\t\treturn child;\r\n\t}\r\n\tremove(child){\r\n\t\tlet index = this.childs.findIndex((c) => c === child);\r\n\t\tif (index !== -1) {\r\n\t\t\tfor(let c of child.childs.concat()) child.remove(c);\r\n\t\t\tthis.childs.splice(index, 1);\r\n\t\t\tchild.deleted();\r\n\t\t\tchild.graphics = null;\r\n\t\t\tchild.parent = null;\r\n\t\t}\r\n\t}\r\n\tsetMinSize(min_w, min_h){\r\n\t\tthis.min_w = min_w;\r\n\t\tthis.min_h = min_h;\r\n\t}\r\n\tmouseEvent(type, x, y, start_x, start_y){\r\n\t\tif (this.mouseEventToChild(type, x, y, start_x, start_y)) return;\r\n\t\tswitch(type){\r\n\t\t\tcase \"HIT\":\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"DOWN\":\r\n\t\t\t\tthis.dragStartCompX = this.x;\r\n\t\t\t\tthis.dragStartCompY = this.y;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"UP\":\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"CLICK\":\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"MOVE\":\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"DRAG\":\r\n\t\t\t\tthis.x = this.dragStartCompX + x - start_x;\r\n\t\t\t\tthis.y = this.dragStartCompY + y - start_y;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tmouseEventToChild(type, x, y, start_x, start_y){\r\n\t\tif (type === \"UP\" && (this.dragFlag || this.clickFlag)){\r\n\t\t\tthis.childs[0].mouseEvent(type, x - this.childs[0].x, y - this.childs[0].y, start_x - this.childs[0].x, start_y - this.childs[0].y);\r\n\t\t\tthis.dragFlag = false;\r\n\t\t\tthis.clickFlag = false;\r\n\t\t}\r\n\t\tif(this.dragFlag) {\r\n\t\t\tthis.childs[0].mouseEvent(type, x - this.childs[0].x, y - this.childs[0].y, start_x - this.childs[0].x, start_y - this.childs[0].y);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfor(let c of this.childs){\r\n\t\t\t\tif (c.checkHit(x, y)){\r\n\t\t\t\t\tswitch(type){\r\n\t\t\t\t\t\tcase \"DOWN\":\r\n\t\t\t\t\t\t\tthis.activeChilds(c);\r\n\t\t\t\t\t\t\tc.mouseEvent(type, x - c.x, y - c.y, start_x - c.x, start_y - c.y);\r\n\t\t\t\t\t\t\tthis.dragFlag = true;\r\n\t\t\t\t\t\t\tthis.clickFlag = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"UP\":\r\n\t\t\t\t\t\tcase \"DRAG\":\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tc.mouseEvent(type, x - c.x, y - c.y, start_x - c.x, start_y - c.y);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tcheckHit(px, py){\r\n\t\tif (\r\n\t\t\tthis.x < px &&\r\n\t\t\tthis.y < py &&\r\n\t\t\tpx < this.x + this.w &&\r\n\t\t\tpy < this.y + this.h\r\n\t\t) return true;\r\n\t\tfor(let c of this.childs){\r\n\t\t\tif(c.checkHit(px - this.x, py - this.y)) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tgetHit(px, py){\r\n\t\tfor(let c of this.childs){\r\n\t\t\tif (c.checkHit(px, py)){\r\n\t\t\t\treturn c.getHit(px - c.x, py - c.y);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (0.0 <= px && 0.0 <= py && px < this.w && py < this.h) return this;\r\n\t\treturn null;\r\n\t}\r\n\tgetRootComponent(){\r\n\t\treturn (this.parent !== null)?this.parent.getRootComponent():this;\r\n\t}\r\n\tgetGrobalPos(px, py){\r\n\t\tif(this.parent === null) return new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_0__[\"GLMath\"].vec2(this.x + px, this.y + py);\r\n\t\telse return this.parent.getGrobalPos(this.x + px, this.y + py);\r\n\t}\r\n\tactiveChilds(c){\r\n\t\tlet index = -1;\r\n\t\tfor(let i = 0; i < this.childs.length; i++){\r\n\t\t\tif(c === this.childs[i]) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(index === -1) return;\r\n\t\tfor(let i = 0; i < index; i++){\r\n\t\t\tthis.swapChilds(index - i, index - i - 1);\r\n\t\t}\r\n\t}\r\n\tswapChilds(index1, index2){\r\n\t\tlet tmp = this.childs[index1];\r\n\t\tthis.childs[index1] = this.childs[index2];\r\n\t\tthis.childs[index2] = tmp;\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/gui/component/component.js?");

/***/ }),

/***/ "./src/gui/component/default_component.js":
/*!************************************************!*\
  !*** ./src/gui/component/default_component.js ***!
  \************************************************/
/*! exports provided: ResizeBox, DefaultComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ResizeBox\", function() { return ResizeBox; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DefaultComponent\", function() { return DefaultComponent; });\n/* harmony import */ var _component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component.js */ \"./src/gui/component/component.js\");\n/* harmony import */ var _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../webgl/core/core.js */ \"./src/webgl/core/core.js\");\n\r\n\r\n\r\nconst ResizeBox = class extends _component_js__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\r\n\tconstructor(){\r\n\t\tsuper(0.0, 0.0, 0.0, 0.0);\r\n\t\tthis.name = \"ResizeBox\";\r\n\t}\r\n\tsetup(){\r\n\t\tthis.w = this.h = 20.0;\r\n\t\tthis.x = this.parent.w - this.w;\r\n\t\tthis.y = this.parent.h - this.h;\r\n\t}\r\n\r\n\tmouseEvent(type, x, y, start_x, start_y){\r\n\t\tif (this.mouseEventToChild(type, x, y, start_x, start_y)) return;\r\n\t\tswitch(type) {\r\n\t\tcase \"HIT\":\r\n\t\t\tbreak;\r\n\t\tcase \"DOWN\":\r\n\t\t\tthis.dragStartCompX = this.x;\r\n\t\t\tthis.dragStartCompY = this.y;\r\n\t\t\tbreak;\r\n\t\tcase \"UP\":\r\n\t\t\t\r\n\t\t\tbreak;\r\n\t\tcase \"CLICK\":\r\n\t\t\tbreak;\r\n\t\tcase \"MOVE\":\r\n\t\t\tbreak;\r\n\t\tcase \"DRAG\":\r\n\t\t\tthis.x = this.dragStartCompX + x - start_x;\r\n\t\t\tthis.y = this.dragStartCompY + y - start_y;\r\n\t\t\tthis.x = Math.max(0.0, this.x);\r\n\t\t\tthis.y = Math.max(0.0, this.y);\r\n\t\t\tthis.x = Math.max(this.parent.min_w - this.w, this.x);\r\n\t\t\tthis.y = Math.max(this.parent.min_h - this.h, this.y);\r\n\t\t\tthis.parent.resize(this.x + this.w, this.y + this.h);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst DefaultComponent = class extends _component_js__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\r\n\tconstructor(x, y, w, h, r = 12.0){\r\n\t\tsuper(x, y, w, h);\r\n\t\tthis.name = \"Empty Node\";\r\n\t\tthis.inner_shape = null;\r\n\t\tthis.outer_shape = null;\r\n\t\tthis.r = r;\r\n\t\tthis.min_w = this.min_h = this.r * 2.0;\r\n\t\tthis.resizeBox = null;\r\n\t}\r\n\tsetup(){\r\n\t\tthis.resizeBox = this.add(new ResizeBox());\r\n\t\tthis.inner_shape = new _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_1__[\"GLCore\"].Shape(this.graphics.gapp);\r\n\t\tthis.outer_shape = new _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_1__[\"GLCore\"].Shape(this.graphics.gapp);\r\n\r\n\t\tthis.resize(this.w, this.h);\r\n\t}\r\n\tdeleted(){\r\n\t\tif (this.inner_shape !== null) this.inner_shape.delete();\r\n\t\tif (this.outer_shape !== null) this.outer_shape.delete();\r\n\t}\r\n\tresize(w, h){\r\n\t\tthis.w = Math.max(this.min_w, w);\r\n\t\tthis.h = Math.max(this.min_h, h);\r\n\r\n\t\tconst add_vertices = (shape, x, y, width, height, r, div) => {\r\n\t\t\tshape.vertex(x + r, y, 0, r / width, 1.0);\r\n\t\t\tshape.vertex(x + width - r, y, 0, (width - r) / width, 1.0);\r\n\t\t\tfor(let i = 1; i < div; i++) shape.vertex(\r\n\t\t\t\tx + width  - r + r * Math.cos(Math.PI * (1.5 + 0.5 * i / div)),\r\n\t\t\t\ty          + r + r * Math.sin(Math.PI * (1.5 + 0.5 * i / div)),\r\n\t\t\t\t0,\r\n\t\t\t\t0.0 + (width  - r + r * Math.cos(Math.PI * (1.5 + 0.5 * i / div))) / width,\r\n\t\t\t\t1.0 - (0.0    + r + r * Math.sin(Math.PI * (1.5 + 0.5 * i / div))) / height\r\n\t\t\t);\r\n\t\t\tshape.vertex(x + width, y + r, 0, 1, 1.0 - r / height);\r\n\t\t\tshape.vertex(x + width, y + height - r, 0, 1, 1.0 - (height - r) / height);\r\n\t\t\tfor(let i = 1; i < div; i++) shape.vertex(\r\n\t\t\t\tx + width  - r + r * Math.cos(Math.PI * (0.0 + 0.5 * i / div)),\r\n\t\t\t\ty + height - r + r * Math.sin(Math.PI * (0.0 + 0.5 * i / div)),\r\n\t\t\t\t0,\r\n\t\t\t\t0.0 + (width  - r + r * Math.cos(Math.PI * (0.0 + 0.5 * i / div))) / width,\r\n\t\t\t\t1.0 - (height - r + r * Math.sin(Math.PI * (0.0 + 0.5 * i / div))) / height\r\n\t\t\t);\r\n\t\t\tshape.vertex(x + width - r, y + height, 0, (width - r) / width, 0.0);\r\n\t\t\tshape.vertex(x + r, y + height, 0, r / width, 0.0);\r\n\t\t\tfor(let i = 1; i < div; i++) shape.vertex(\r\n\t\t\t\tx          + r + r * Math.cos(Math.PI * (0.5 + 0.5 * i / div)),\r\n\t\t\t\ty + height - r + r * Math.sin(Math.PI * (0.5 + 0.5 * i / div)),\r\n\t\t\t\t0,\r\n\t\t\t\t0.0 + (0.0    + r + r * Math.cos(Math.PI * (0.5 + 0.5 * i / div))) / width,\r\n\t\t\t\t1.0 - (height - r + r * Math.sin(Math.PI * (0.5 + 0.5 * i / div))) / height\r\n\t\t\t);\r\n\t\t\tshape.vertex(x, y + height - r, 0, 0, 1.0 - (height - r) / height);\r\n\t\t\tshape.vertex(x, y + r, 0, 0, 1.0 - r / height);\r\n\t\t\tfor(let i = 1; i < div; i++) shape.vertex(\r\n\t\t\t\tx          + r + r * Math.cos(Math.PI * (1.0 + 0.5 * i / div)),\r\n\t\t\t\ty          + r + r * Math.sin(Math.PI * (1.0 + 0.5 * i / div)),\r\n\t\t\t\t0,\r\n\t\t\t\t0.0 + (0.0        + r + r * Math.cos(Math.PI * (1.0 + 0.5 * i / div))) / width,\r\n\t\t\t\t1.0 - (0.0        + r + r * Math.sin(Math.PI * (1.0 + 0.5 * i / div))) / height\r\n\t\t\t);\r\n\t\t};\r\n\t\tconst weight = 6.0;\r\n\t\tconst div = 8;\r\n\t\tthis.inner_shape.beginShape(this.inner_shape.gl.TRIANGLE_FAN);\r\n\t\tthis.inner_shape.color(1.0, 1.0, 1.0, 1.0);\r\n\t\tadd_vertices(this.inner_shape, weight * 0.5, weight * 0.5, this.w - weight, this.h - weight, this.r, div);\r\n\t\tthis.inner_shape.endShape();\r\n\t\tthis.outer_shape.beginShape(this.outer_shape.gl.TRIANGLE_FAN);\r\n\t\tthis.outer_shape.color(0.3, 0.3, 0.3, 1.0);\r\n\t\tadd_vertices(this.outer_shape, -weight * 0.5, -weight * 0.5, this.w + weight, this.h + weight, this.r + weight, div);\r\n\t\tthis.outer_shape.endShape();\r\n\t}\r\n\tupdate(){\r\n\t\t/*\r\n\t\tif(this.parent !== null){\r\n\t\t\tthis.x = Math.max(0.0, this.x);\r\n\t\t\tthis.y = Math.max(0.0, this.y);\r\n\t\t\tthis.x = Math.min(this.x, this.parent.w - this.w);\r\n\t\t\tthis.y = Math.min(this.y, this.parent.h - this.h);\r\n\t\t}\r\n\t\t*/\r\n\t}\r\n\tdraw(){\r\n\t\tthis.graphics.shape(this.outer_shape);\r\n\t\tthis.graphics.shape(this.inner_shape);\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/gui/component/default_component.js?");

/***/ }),

/***/ "./src/gui/component/draggable_component.js":
/*!**************************************************!*\
  !*** ./src/gui/component/draggable_component.js ***!
  \**************************************************/
/*! exports provided: DraggableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DraggableComponent\", function() { return DraggableComponent; });\n/* harmony import */ var _component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component.js */ \"./src/gui/component/component.js\");\n\r\n\r\nconst DraggableComponent = class extends _component_js__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\r\n\tconstructor(){\r\n\t\tsuper(0, 0, 0, 0);\r\n\t\tthis.name = \"Draggable area\";\r\n\t}\r\n\tcheckHit(px, py){\r\n\t\t/*\r\n\t\tif (\r\n\t\t\t0 < px &&\r\n\t\t\t0 < py &&\r\n\t\t\tpx < this.parent.w &&\r\n\t\t\tpy < this.parent.h\r\n\t\t) return true;\r\n\t\t*/\r\n\t\treturn true;\r\n\t\t\r\n\t\tfor(let c of this.childs){\r\n\t\t\tif(c.checkHit(px - this.x, py - this.y)) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/gui/component/draggable_component.js?");

/***/ }),

/***/ "./src/gui/component/root_component.js":
/*!*********************************************!*\
  !*** ./src/gui/component/root_component.js ***!
  \*********************************************/
/*! exports provided: RootComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RootComponent\", function() { return RootComponent; });\n/* harmony import */ var _component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component.js */ \"./src/gui/component/component.js\");\n/* harmony import */ var _webgl_graphics_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../webgl/graphics.js */ \"./src/webgl/graphics.js\");\n/* harmony import */ var _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../webgl/utils/math.js */ \"./src/webgl/utils/math.js\");\n\r\n\r\n\r\n\r\nconst RootComponent = class extends _component_js__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\r\n\tconstructor(canvas) {\r\n\t\tsuper(0, 0, canvas.width, canvas.height);\r\n\r\n\t\tthis.graphics = new _webgl_graphics_js__WEBPACK_IMPORTED_MODULE_1__[\"Graphics\"](canvas);\r\n\t\tthis.name = \"Root\";\r\n\t\tthis.mousePressed = false;\r\n\t\tthis.pmousePressed = false;\r\n\t\tthis.dragStartMouseX = 0.0;\r\n\t\tthis.dragStartMouseY = 0.0;\r\n\t\tthis.original = new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_2__[\"GLMath\"].vec2(0.0, 0.0);\r\n\t\tthis.mouse = new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_2__[\"GLMath\"].vec2(0.0, 0.0);\r\n\t\tthis.pmouse = new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_2__[\"GLMath\"].vec2(0.0, 0.0);\r\n\t\tthis.zoom = 1.0;\r\n\t\tthis.wheel = 0.0;\r\n\r\n\t\tthis.mouseX = 0.0;\r\n\t\tthis.mouseY = 0.0;\r\n\t\tthis.graphics.gapp.canvas.addEventListener(\"mousedown\", (e) => {\r\n\t\t\tthis.mousePressed = true;\r\n\t\t});\r\n\t\tthis.graphics.gapp.canvas.addEventListener(\"mouseup\", (e) => {\r\n\t\t\tthis.mousePressed = false;\r\n\t\t});\r\n\t\tthis.graphics.gapp.canvas.addEventListener(\"mousemove\", (e) => {\r\n\t\t\tthis.mouseX = e.clientX;\r\n\t\t\tthis.mouseY = e.clientY;\r\n\t\t});\r\n\t\tthis.graphics.gapp.canvas.addEventListener(\"wheel\", (e) => {\r\n\t\t\tthis.setZoom(e.deltaY * 0.001);\r\n\t\t});\r\n\r\n\t\tthis.setup();\r\n\t}\r\n\tupdate(){\r\n\t\tthis.w = this.graphics.width;\r\n\t\tthis.h = this.graphics.height;\r\n\t\tthis.pmouse = this.mouse.copy();\r\n\t\tthis.mouse.arr[0] = (this.mouseX - this.original.arr[0]) / this.zoom;\r\n\t\tthis.mouse.arr[1] = (this.mouseY - this.original.arr[1]) / this.zoom;\r\n\t\tthis.sendMouseEvent();\r\n\t\tsuper.update_sub();\r\n\t}\r\n\tdraw(){\r\n\t\tthis.graphics.pushMatrix();\r\n\t\tthis.graphics.translate(this.original.arr[0], this.original.arr[1]);\r\n\t\tthis.graphics.scale(this.zoom, this.zoom);\r\n\t\tthis.draw_sub();\r\n\t\tthis.graphics.popMatrix();\r\n\t};\r\n\tsetZoom(wheel){\r\n\t\tthis.wheel -= wheel;\r\n\t\tlet post_zoom = Math.exp(this.wheel);\r\n\t\tthis.original.arr[0] = this.mouseX + (this.original.arr[0] - this.mouseX) * (post_zoom / this.zoom);\r\n\t\tthis.original.arr[1] = this.mouseY + (this.original.arr[1] - this.mouseY) * (post_zoom / this.zoom);\r\n\t\tthis.zoom = post_zoom;\r\n\t}\r\n\tsendMouseEvent(){\r\n\t\tif ((!this.mousePressed) && this.dragFlag){\r\n\t\t\tthis.childs[0].mouseEvent(\"UP\", this.mouse.arr[0] - this.childs[0].x, this.mouse.arr[1] - this.childs[0].y, 0, 0);\r\n\t\t\tif(this.clickFlag) this.childs[0].mouseEvent(\"CLICK\", this.mouse.arr[0] - this.childs[0].x, this.mouse.arr[1] - this.childs[0].y, 0, 0);\r\n\t\t\tthis.dragFlag = false;\r\n\t\t\tthis.clickFlag = false;\r\n\t\t}\r\n\t\tif(this.dragFlag){\r\n\t\t\tthis.childs[0].mouseEvent(\"HIT\", this.mouse.arr[0] - this.childs[0].x, this.mouse.arr[1] - this.childs[0].y, 0, 0);\r\n\t\t\tif(this.mouse.arr[0] !== this.pmouse.arr[0] || this.mouse.arr[1] !== this.pmouse.arr[1]){\r\n\t\t\t\tthis.childs[0].mouseEvent(\"DRAG\", this.mouse.arr[0] - this.childs[0].x, this.mouse.arr[1] - this.childs[0].y, this.dragStartMouseX - this.childs[0].x, this.dragStartMouseY - this.childs[0].y);\r\n\t\t\t\tthis.clickFlag = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfor(let c of this.childs){\r\n\t\t\t\tif (c.checkHit(this.mouse.arr[0], this.mouse.arr[1])){\r\n\t\t\t\t\tc.mouseEvent(\"HIT\", this.mouse.arr[0] - c.x, this.mouse.arr[1] - c.y, 0, 0);\r\n\t\t\t\t\tif(this.mouse.arr[0] !== this.pmouse.arr[0] || this.mouse.arr[1] !== this.pmouse.arr[1]){\r\n\t\t\t\t\t\tc.mouseEvent(\"MOVE\", this.mouse.arr[0] - c.x, this.mouse.arr[1] - c.y, 0, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.mousePressed && !this.pmousePressed){\r\n\t\t\t\t\t\tthis.activeChilds(c);\r\n\t\t\t\t\t\tc.mouseEvent(\"DOWN\", this.mouse.arr[0] - c.x, this.mouse.arr[1] - c.y, 0, 0);\r\n\t\t\t\t\t\tthis.dragStartMouseX = this.mouse.arr[0]; this.dragStartMouseY = this.mouse.arr[1];\r\n\t\t\t\t\t\tthis.dragFlag = true;\r\n\t\t\t\t\t\tthis.clickFlag = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tc.update();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.pmousePressed = this.mousePressed;\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/gui/component/root_component.js?");

/***/ }),

/***/ "./src/gui/component/swing_component.js":
/*!**********************************************!*\
  !*** ./src/gui/component/swing_component.js ***!
  \**********************************************/
/*! exports provided: SwingResizeBox, SwingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwingResizeBox\", function() { return SwingResizeBox; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwingComponent\", function() { return SwingComponent; });\n/* harmony import */ var _default_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./default_component.js */ \"./src/gui/component/default_component.js\");\n\r\n\r\nconst SwingResizeBox = class extends _default_component_js__WEBPACK_IMPORTED_MODULE_0__[\"ResizeBox\"] {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.name = \"SwingResizeBox\";\r\n\r\n\t\tthis.accelerator = {x: 0.0, y: 0.0};\r\n\t\tthis.velocity = {x: 0.0, y: 0.0};\r\n\t\tthis.target = {x: 0.0, y: 0.0};\r\n\t}\r\n\tsetup() {\r\n\t\tsuper.setup();\r\n\t\tthis.w = this.h = 20.0;\r\n\t\tthis.x = this.parent.w - this.w;\r\n\t\tthis.y = this.parent.h - this.h;\r\n\t\tthis.target = {x: this.x, y: this.y};\r\n\t}\r\n\tupdate() {\r\n\t\tsuper.update();\r\n\t\tthis.velocity.x *= this.parent.param1; this.velocity.y *= this.parent.param1;\r\n\t\tthis.accelerator = {x: this.target.x, y: this.target.y};\r\n\t\tthis.accelerator.x -= this.x; this.accelerator.y -= this.y;\r\n\t\tthis.accelerator.x *= this.parent.param2; this.accelerator.y *= this.parent.param2;\r\n\t\tthis.velocity.x += this.accelerator.x; this.velocity.y += this.accelerator.y;\r\n\t\tthis.x += this.velocity.x; this.y += this.velocity.y;\r\n\t\tthis.target.x = Math.max(0.0, this.target.x);\r\n\t\tthis.target.y = Math.max(0.0, this.target.y);\r\n\t\tthis.target.x = Math.max(this.parent.min_w - this.w, this.target.x);\r\n\t\tthis.target.y = Math.max(this.parent.min_h - this.h, this.target.y);\r\n\t\tif (\r\n\t\t\t(Math.abs(this.parent.w - (this.x + this.w)) >= 1.0) || \r\n\t\t\t(Math.abs(this.parent.h - (this.y + this.h)) >= 1.0)\r\n\t\t) {\r\n\t\t\tthis.parent.resize(this.x + this.w, this.y + this.h);\r\n\t\t}\r\n\t}\r\n\tmouseEvent(type, x, y, start_x, start_y) {\r\n\t\tif (this.mouseEventToChild(type, x, y, start_x, start_y)) return;\r\n\t\tswitch(type) {\r\n\t\tcase \"HIT\":\r\n\t\t\tbreak;\r\n\t\tcase \"DOWN\":\r\n\t\t\tthis.dragStartCompX = this.target.x;\r\n\t\t\tthis.dragStartCompY = this.target.y;\r\n\t\t\tbreak;\r\n\t\tcase \"UP\":\r\n\t\t\tbreak;\r\n\t\tcase \"CLICK\":\r\n\t\t\tbreak;\r\n\t\tcase \"MOVE\":\r\n\t\t\tbreak;\r\n\t\tcase \"DRAG\":\r\n\t\t\tthis.target.x = this.dragStartCompX + x - start_x;\r\n\t\t\tthis.target.y = this.dragStartCompY + y - start_y;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst SwingComponent = class extends _default_component_js__WEBPACK_IMPORTED_MODULE_0__[\"DefaultComponent\"] {\r\n\tconstructor(x, y, w, h, r = 12.0, param1 = 0.74, param2 = 0.1){\r\n\t\tsuper(x, y, w, h, r);\r\n\t\tthis.name = \"Swing Node\";\r\n\r\n\t\tthis.param1 = param1;\r\n\t\tthis.param2 = param2;\r\n\r\n\t\tthis.accelerator = {x: 0.0, y: 0.0};\r\n\t\tthis.velocity = {x: 0.0, y: 0.0};\r\n\t\tthis.target = {x: 0.0, y: 0.0};\r\n\t}\r\n\tsetup() {\r\n\t\tsuper.setup();\r\n\t\tthis.target = {x: this.x, y: this.y};\r\n\t\tthis.remove(this.resizeBox);\r\n\t\tthis.resizeBox = this.add(new SwingResizeBox());\r\n\t}\r\n\tupdate() {\r\n\t\tsuper.update();\r\n\t\tthis.velocity.x *= this.param1; this.velocity.y *= this.param1;\r\n\t\tthis.accelerator = {x: this.target.x, y: this.target.y};\r\n\t\tthis.accelerator.x -= this.x; this.accelerator.y -= this.y;\r\n\t\tthis.accelerator.x *= this.param2; this.accelerator.y *= this.param2;\r\n\t\tthis.velocity.x += this.accelerator.x; this.velocity.y += this.accelerator.y;\r\n\t\tthis.x += this.velocity.x; this.y += this.velocity.y;\r\n\t\t\r\n\t}\r\n\tmouseEvent(type, x, y, start_x, start_y) {\r\n\t\tif (this.mouseEventToChild(type, x, y, start_x, start_y)) return;\r\n\t\tswitch(type) {\r\n\t\tcase \"HIT\":\r\n\t\t\tbreak;\r\n\t\tcase \"DOWN\":\r\n\t\t\tthis.dragStartCompX = this.target.x;\r\n\t\t\tthis.dragStartCompY = this.target.y;\r\n\t\t\tbreak;\r\n\t\tcase \"UP\":\r\n\t\t\tbreak;\r\n\t\tcase \"CLICK\":\r\n\t\t\tbreak;\r\n\t\tcase \"MOVE\":\r\n\t\t\tbreak;\r\n\t\tcase \"DRAG\":\r\n\t\t\tthis.target.x = this.dragStartCompX + x - start_x;\r\n\t\t\tthis.target.y = this.dragStartCompY + y - start_y;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/gui/component/swing_component.js?");

/***/ }),

/***/ "./src/gui/templates/node_component.js":
/*!*********************************************!*\
  !*** ./src/gui/templates/node_component.js ***!
  \*********************************************/
/*! exports provided: NodeParam, NodeParams, Node */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NodeParam\", function() { return NodeParam; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NodeParams\", function() { return NodeParams; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Node\", function() { return Node; });\n/* harmony import */ var _component_component_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/component.js */ \"./src/gui/component/component.js\");\n/* harmony import */ var _component_swing_component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../component/swing_component.js */ \"./src/gui/component/swing_component.js\");\n/* harmony import */ var _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../webgl/core/core.js */ \"./src/webgl/core/core.js\");\n/* harmony import */ var _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../webgl/utils/math.js */ \"./src/webgl/utils/math.js\");\n\r\n\r\n\r\n\r\n\r\nconst NodeParam = class extends _component_component_js__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\r\n\tconstructor(type, name) {\r\n\t\tsuper(0.0, 0.0, 0.0, 0.0);\r\n\t\tthis.type = type;\r\n\t\tthis.name = name;\r\n\r\n\t\tthis.node = null;\r\n\t\tthis.output = null;\r\n\t\tthis.vector = null;\r\n\t\tthis.isInput = false;\r\n\t\tthis.size = 0.0;\r\n\t\tthis.hit = 0.0;\r\n\r\n\t\tthis.inner_shape = null;\r\n\t\tthis.outer_shape = null;\r\n\t\tthis.arrow_shape = null;\r\n\t}\r\n\tsetup(){\r\n\t\tthis.update_shape();\r\n\t}\r\n\tdeleted(){\r\n\t\tif (this.inner_shape !== null) this.inner_shape.delete();\r\n\t\tif (this.outer_shape !== null) this.outer_shape.delete();\r\n\t\tif (this.arrow_shape !== null) this.arrow_shape.delete();\r\n\t}\r\n\tupdate_shape(){\r\n\t\tthis.inner_shape = new _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_2__[\"GLCore\"].Shape(this.graphics.gapp);\r\n\t\tthis.outer_shape = new _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_2__[\"GLCore\"].Shape(this.graphics.gapp);\r\n\t\tthis.arrow_shape = new _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_2__[\"GLCore\"].Shape(this.graphics.gapp);\r\n\t\tconst weight = 6.0;\r\n\t\tconst div = 32;\r\n\t\tthis.inner_shape.beginShape(this.inner_shape.gl.TRIANGLE_FAN);\r\n\t\tthis.inner_shape.color(1.0, 1.0, 1.0, 1.0);\r\n\t\tfor(let i = 0; i < div; i++) this.inner_shape.vertex(\r\n\t\t\t0.5 * this.size + 0.5 * (this.size - weight + this.hit * 0.5 * this.size) * Math.cos(2.0 * Math.PI * i / div),\r\n\t\t\t0.5 * this.size + 0.5 * (this.size - weight + this.hit * 0.5 * this.size) * Math.sin(2.0 * Math.PI * i / div),\r\n\t\t\t0.0\r\n\t\t);\r\n\t\tthis.inner_shape.endShape();\r\n\t\tthis.outer_shape.beginShape(this.outer_shape.gl.TRIANGLE_FAN);\r\n\t\tthis.outer_shape.color(0.3, 0.3, 0.3, 1.0);\r\n\t\tfor(let i = 0; i < div; i++) this.outer_shape.vertex(\r\n\t\t\t0.5 * this.size + 0.5 * (this.size + weight + this.hit * 0.5 * this.size) * Math.cos(2.0 * Math.PI * i / div),\r\n\t\t\t0.5 * this.size + 0.5 * (this.size + weight + this.hit * 0.5 * this.size) * Math.sin(2.0 * Math.PI * i / div),\r\n\t\t\t0.0\r\n\t\t);\r\n\t\tthis.outer_shape.endShape();\r\n\t\tthis.arrow_shape.beginShape(this.outer_shape.gl.TRIANGLE_FAN);\r\n\t\tthis.arrow_shape.color(0.3, 0.3, 0.3, 1.0);\r\n\t\tthis.arrow_shape.vertex(-20.0, 10.0, 0.0);\r\n\t\tthis.arrow_shape.vertex(0.0, 0.0, 0.0);\r\n\t\tthis.arrow_shape.vertex(-20.0, -10.0, 0.0);\r\n\t\tthis.arrow_shape.endShape();\r\n\r\n\t}\r\n\tcanOutput(p){\r\n\t\treturn p.type === this.type;\r\n\t}\r\n\tjob() {}\r\n\treset() {}\r\n\tupdate() {\r\n\t\tif (this.output !== null) {\r\n\t\t\tif (this.output.graphics === null) {\r\n\t\t\t\tthis.output = null;\r\n\t\t\t\tthis.vector = null;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.vector = this.output.getGrobalPos(0.0, 0.0);\r\n\t\t\t\tthis.vector.sub(this.getGrobalPos(0.0, 0.0));\r\n\t\t\t\tthis.vector.add(new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_3__[\"GLMath\"].vec2(\r\n\t\t\t\t\tthis.output.isInput ? 0.0 : this.output.size,\r\n\t\t\t\t\tthis.output.size / 2.0\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.hit !== 0.0) {\r\n\t\t\tthis.hit = Math.max(0.0, this.hit - 0.25);\r\n\t\t\tthis.update_shape();\r\n\t\t}\r\n\t}\r\n\tdraw() {\r\n\t\tthis.graphics.shape(this.outer_shape);\r\n\t\tthis.graphics.shape(this.inner_shape);\r\n\t\tthis.graphics.strokeWeight(3.5);\r\n\t\tthis.graphics.stroke(0.3, 0.3, 0.3, 1.0);\r\n\t\tif(this.vector !== null) {\r\n\t\t\tif(this.isInput) this.bezier(0.0, this.size / 2.0, this.vector.arr[0], this.vector.arr[1]);\r\n\t\t\telse this.bezier(this.vector.arr[0], this.vector.arr[1], this.size, this.size / 2.0);\r\n\t\t}\r\n\t}\r\n\tbezier(x1, y1, x2, y2) {\r\n\t\tthis.graphics.bezier(\r\n\t\t\tx1 - 20.0, y1,\r\n\t\t\tx1 - 20.0 - 100.0, y1,\r\n\t\t\tx2 + 100.0, y2,\r\n\t\t\tx2, y2,\r\n\t\t\t16\r\n\t\t);\r\n\t\tthis.graphics.pushMatrix();\r\n\t\tthis.graphics.translate(x1, y1);\r\n\t\tthis.graphics.shape(this.arrow_shape);\r\n\t\tthis.graphics.popMatrix();\r\n\t}\r\n\tmouseEvent(type, x, y, start_x, start_y) {\r\n\t\tif (type === \"HIT\") { this.hit = Math.min(1.0, this.hit + 0.5); this.update_shape(); }\r\n\t\tif (this.isInput) {\r\n\t\t\tif (type === \"UP\" && this.output === null) this.vector = null;\r\n\t\t\tif (type === \"DRAG\") {\r\n\t\t\t\tthis.vector = new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_3__[\"GLMath\"].vec2(x, y);\r\n\t\t\t\tlet grobalMouse = this.getGrobalPos(this.vector.arr[0], this.vector.arr[1]);\r\n\t\t\t\tlet hit = this.getRootComponent().getHit(grobalMouse.arr[0], grobalMouse.arr[1]);\r\n\t\t\t\tthis.output = null;\r\n\t\t\t\tif(hit instanceof NodeParam) { this.output = hit; } else { return };\r\n\t\t\t\tif((this.output === this) || (this.output.isInput)){\r\n\t\t\t\t\tthis.output = null;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.output = this.canOutput(this.output) ? this.output : null;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (type === \"UP\"){\r\n\t\t\t\tthis.vector = null;\r\n\t\t\t\tif (this.output !== null){\r\n\t\t\t\t\tthis.output.output = this;\r\n\t\t\t\t\tthis.output = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (type === \"DRAG\") {\r\n\t\t\t\tthis.vector = new _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_3__[\"GLMath\"].vec2(x, y);\r\n\t\t\t\tlet grobalMouse = this.getGrobalPos(this.vector.arr[0], this.vector.arr[1]);\r\n\t\t\t\tlet hit = this.getRootComponent().getHit(grobalMouse.arr[0], grobalMouse.arr[1]);\r\n\t\t\t\tthis.output = null;\r\n\t\t\t\tif(hit instanceof NodeParam) { this.output = hit; } else { return };\r\n\t\t\t\tif((this.output === this) || (!this.output.isInput)){\r\n\t\t\t\t\tthis.output = null;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.output = this.output.canOutput(this) ? this.output : null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst NodeParams = class extends _component_component_js__WEBPACK_IMPORTED_MODULE_0__[\"Component\"] {\r\n\tconstructor(x, y, size, gap, input, node) {\r\n\t\tsuper(x, y, size, gap);\r\n\r\n\t\tthis.size = size;\r\n\t\tthis.gap = gap;\r\n\t\tthis.isInput = input;\r\n\t\tthis.node = node;\r\n\r\n\t\tthis.name = this.isInput ? \"Input\" : \"Output\";\r\n\t}\r\n\tadd(child){\r\n\t\tif(!(child instanceof NodeParam)) return null;\r\n\t\tchild.x = 0;\r\n\t\tchild.y = this.h;\r\n\t\tchild.size = this.size;\r\n\t\tchild.w = child.h = this.size;\r\n\t\tchild.isInput = this.isInput;\r\n\t\tchild.node = this.node;\r\n\t\tthis.h += this.size + this.gap;\r\n\t\treturn super.add(child);\r\n\t}\r\n\tcheckHit(px, py){\r\n\t\tfor(let c of this.childs){\r\n\t\t\tif(c.checkHit(px - this.x, py - this.y)) return true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nconst Node = class extends _component_swing_component_js__WEBPACK_IMPORTED_MODULE_1__[\"SwingComponent\"] {\r\n\tconstructor(name, x, y) {\r\n\t\tsuper(x, y, 140.0, 0.0);\r\n\t\tthis.name = name;\r\n\r\n\t\tthis.paramSize = 20.0;\r\n\t\tthis.paramGap = 10.0;\r\n\t\tthis.finishJob = false;\r\n\r\n\t\tthis.inputs = null;\r\n\t\tthis.outputs = null;\r\n\t}\r\n\tsetup(){\r\n\t\tsuper.setup();\r\n\t\tthis.inputs = new NodeParams(0.0 - this.paramSize / 2.0, 0, this.paramSize, this.paramGap, true, this);\r\n\t\tthis.outputs = new NodeParams(this.w - this.paramSize / 2.0, 0, this.paramSize, this.paramGap, false, this);\r\n\t\tthis.add(this.inputs); this.add(this.outputs);\r\n\t}\r\n\tjob(){\r\n\t\tthis.finishJob = true;\r\n\t\tfor(let c of this.inputs.childs){\r\n\t\t\tlet p = c.output;\r\n\t\t\tif(p === null || p.graphics === null) continue;\r\n\t\t\tlet n = p.node;\r\n\t\t\tif(n === null || n.graphics === null) continue;\r\n\t\t\tif(!n.finishJob) n.job();\r\n\t\t\tc.job();\r\n\t\t}\r\n\t}\r\n\treset(){\r\n\t\tthis.finishJob = false;\r\n\t\tfor(let c of this.inputs.childs){\r\n\t\t\tlet p = c.output;\r\n\t\t\tif(p === null || p.graphics === null) continue;\r\n\t\t\tlet n = p.node;\r\n\t\t\tif(n === null || n.graphics === null) continue;\r\n\t\t\tif(n.finishJob) n.reset();\r\n\t\t\tc.reset();\r\n\t\t}\r\n\t}\r\n\tupdate(){\r\n\t\tthis.min_w = this.inputs.w + this.outputs.w;\r\n\t\tthis.min_h = Math.max(this.inputs.h, this.outputs.h) + 0.5 * this.paramSize;\r\n\t\tsuper.update();\r\n\t}\r\n\tdraw(){\r\n\t\tthis.inputs.x = 0.0 - 0.5 * this.paramSize; this.inputs.y = 0.5 * (this.h - this.inputs.h);\r\n\t\tthis.outputs.x = this.w - 0.5 * this.paramSize; this.outputs.y = 0.5 * (this.h - this.outputs.h);\r\n\t\tsuper.draw();\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/gui/templates/node_component.js?");

/***/ }),

/***/ "./src/hydrangea.js":
/*!**************************!*\
  !*** ./src/hydrangea.js ***!
  \**************************/
/*! exports provided: HydrangeaJS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HydrangeaJS\", function() { return HydrangeaJS; });\n/* harmony import */ var _webgl_graphics_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webgl/graphics.js */ \"./src/webgl/graphics.js\");\n/* harmony import */ var _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webgl/core/core.js */ \"./src/webgl/core/core.js\");\n/* harmony import */ var _webgl_utils_event_listener_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webgl/utils/event_listener.js */ \"./src/webgl/utils/event_listener.js\");\n/* harmony import */ var _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./webgl/utils/math.js */ \"./src/webgl/utils/math.js\");\n/* harmony import */ var _gui_component_component_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gui/component/component.js */ \"./src/gui/component/component.js\");\n/* harmony import */ var _gui_component_default_component_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./gui/component/default_component.js */ \"./src/gui/component/default_component.js\");\n/* harmony import */ var _gui_component_draggable_component_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./gui/component/draggable_component.js */ \"./src/gui/component/draggable_component.js\");\n/* harmony import */ var _gui_component_root_component_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gui/component/root_component.js */ \"./src/gui/component/root_component.js\");\n/* harmony import */ var _gui_component_swing_component_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./gui/component/swing_component.js */ \"./src/gui/component/swing_component.js\");\n/* harmony import */ var _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./gui/templates/node_component.js */ \"./src/gui/templates/node_component.js\");\n/* harmony import */ var _extra_shader_node_frame_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./extra/shader_node/frame.js */ \"./src/extra/shader_node/frame.js\");\n/* harmony import */ var _extra_shader_node_param_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./extra/shader_node/param.js */ \"./src/extra/shader_node/param.js\");\n/* harmony import */ var _extra_shader_node_picture_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./extra/shader_node/picture.js */ \"./src/extra/shader_node/picture.js\");\n/* harmony import */ var _extra_shader_node_shader_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./extra/shader_node/shader.js */ \"./src/extra/shader_node/shader.js\");\n/* harmony import */ var _extra_shader_node_time_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./extra/shader_node/time.js */ \"./src/extra/shader_node/time.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst HydrangeaJS = {\r\n\tWebGL: {\r\n\t\tGraphics: _webgl_graphics_js__WEBPACK_IMPORTED_MODULE_0__[\"Graphics\"],\r\n\t\tGLCore: _webgl_core_core_js__WEBPACK_IMPORTED_MODULE_1__[\"GLCore\"],\r\n\t\tEventListener: _webgl_utils_event_listener_js__WEBPACK_IMPORTED_MODULE_2__[\"EventListener\"],\r\n\t\tGLMath: _webgl_utils_math_js__WEBPACK_IMPORTED_MODULE_3__[\"GLMath\"]\r\n\t},\r\n\tGUI: {\r\n\t\tComponent: {\r\n\t\t\tComponent: _gui_component_component_js__WEBPACK_IMPORTED_MODULE_4__[\"Component\"],\r\n\t\t\tDefaultComponent: _gui_component_default_component_js__WEBPACK_IMPORTED_MODULE_5__[\"DefaultComponent\"],\r\n\t\t\tResizeBox: _gui_component_default_component_js__WEBPACK_IMPORTED_MODULE_5__[\"ResizeBox\"],\r\n\t\t\tDraggableComponent: _gui_component_draggable_component_js__WEBPACK_IMPORTED_MODULE_6__[\"DraggableComponent\"],\r\n\t\t\tRootComponent: _gui_component_root_component_js__WEBPACK_IMPORTED_MODULE_7__[\"RootComponent\"],\r\n\t\t\tSwingComponent: _gui_component_swing_component_js__WEBPACK_IMPORTED_MODULE_8__[\"SwingComponent\"],\r\n\t\t\tSwingResizeBox: _gui_component_swing_component_js__WEBPACK_IMPORTED_MODULE_8__[\"SwingResizeBox\"]\r\n\t\t},\r\n\t\tTemplates: {\r\n\t\t\tNode: _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_9__[\"Node\"],\r\n\t\t\tNodeParams: _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_9__[\"NodeParams\"],\r\n\t\t\tNodeParam: _gui_templates_node_component_js__WEBPACK_IMPORTED_MODULE_9__[\"NodeParam\"]\r\n\t\t}\r\n\t},\r\n\tExtra: {\r\n\t\tShaderNode: {\r\n\t\t\tFrameNode: _extra_shader_node_frame_js__WEBPACK_IMPORTED_MODULE_10__[\"FrameNode\"],\r\n\t\t\tValueNodeParam: _extra_shader_node_param_js__WEBPACK_IMPORTED_MODULE_11__[\"ValueNodeParam\"],\r\n\t\t\tPictureNode: _extra_shader_node_picture_js__WEBPACK_IMPORTED_MODULE_12__[\"PictureNode\"],\r\n\t\t\tShaderNode: _extra_shader_node_shader_js__WEBPACK_IMPORTED_MODULE_13__[\"ShaderNode\"],\r\n\t\t\tTimeNode: _extra_shader_node_time_js__WEBPACK_IMPORTED_MODULE_14__[\"TimeNode\"],\r\n\t\t}\r\n\t}\r\n};\r\n\r\nwindow.HydrangeaJS = HydrangeaJS;\n\n//# sourceURL=webpack:///./src/hydrangea.js?");

/***/ }),

/***/ "./src/webgl/core/app.js":
/*!*******************************!*\
  !*** ./src/webgl/core/app.js ***!
  \*******************************/
/*! exports provided: App */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"App\", function() { return App; });\n/* harmony import */ var _utils_event_listener_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/event_listener.js */ \"./src/webgl/utils/event_listener.js\");\n\r\n\r\nconst App = class {\r\n\tconstructor(canvas) {\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.gl = this.canvas.getContext(\"webgl\") || this.canvas.getContext(\"experimental-webgl\");\r\n\t\tthis.width = this.canvas.width; this.height = this.canvas.height;\r\n\t\tthis.current_frame = null;\r\n\t\tthis.events = new _utils_event_listener_js__WEBPACK_IMPORTED_MODULE_0__[\"EventListener\"]();\r\n\t\tthis.addEventListener = (name, func) => { this.events.addEventListener(name, func) };\r\n\r\n\t\t// enable float texture\r\n\t\tthis.oes_texture_float = this.gl.getExtension('OES_texture_float');\r\n\t\t// clear canvas\r\n\t\tthis.gl.clearColor(1.0, 1.0, 1.0, 1.0);\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\r\n\t\tthis.gl.enable(this.gl.BLEND);\r\n\t\tthis.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\t\t\r\n\t\t// resize\r\n\t\tthis.addEventListener(\"resize\", (event) => {\r\n\t\t\tthis.width = event.width; this.height = event.height;\r\n\t\t\tthis.canvas.width = this.width; this.canvas.height = this.height;\r\n\t\t\tthis.gl.viewport(0, 0, this.width, this.height);\r\n\t\t});\r\n\t\t// render\r\n\t\tthis.addEventListener(\"render\", (event) => {\r\n\t\t\tthis.gl.finish();\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tthis.events.trigger(\"render\", {});\r\n\t}\r\n\tresize(width, height) {\r\n\t\tif ((typeof (width) !== \"number\") || (typeof (height) !== \"number\")) throw new TypeError();\r\n\t\tthis.events.trigger(\"resize\", { width: parseFloat(width), height: parseFloat(height) });\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/core/app.js?");

/***/ }),

/***/ "./src/webgl/core/core.js":
/*!********************************!*\
  !*** ./src/webgl/core/core.js ***!
  \********************************/
/*! exports provided: GLCore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GLCore\", function() { return GLCore; });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.js */ \"./src/webgl/core/app.js\");\n/* harmony import */ var _shader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shader.js */ \"./src/webgl/core/shader.js\");\n/* harmony import */ var _shape_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shape.js */ \"./src/webgl/core/shape.js\");\n/* harmony import */ var _texture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./texture.js */ \"./src/webgl/core/texture.js\");\n/* harmony import */ var _frame_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./frame.js */ \"./src/webgl/core/frame.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst GLCore = {\r\n\tApp: _app_js__WEBPACK_IMPORTED_MODULE_0__[\"App\"],\r\n\tShader: _shader_js__WEBPACK_IMPORTED_MODULE_1__[\"Shader\"],\r\n\tShape: _shape_js__WEBPACK_IMPORTED_MODULE_2__[\"Shape\"],\r\n\tTexture: _texture_js__WEBPACK_IMPORTED_MODULE_3__[\"Texture\"],\r\n\tFrame: _frame_js__WEBPACK_IMPORTED_MODULE_4__[\"Frame\"]\r\n}\n\n//# sourceURL=webpack:///./src/webgl/core/core.js?");

/***/ }),

/***/ "./src/webgl/core/frame.js":
/*!*********************************!*\
  !*** ./src/webgl/core/frame.js ***!
  \*********************************/
/*! exports provided: Frame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Frame\", function() { return Frame; });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.js */ \"./src/webgl/core/app.js\");\n/* harmony import */ var _texture_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./texture.js */ \"./src/webgl/core/texture.js\");\n\r\n\r\n\r\nconst Frame = class {\r\n\tconstructor(app, width, height, format = null, type = null) {\r\n\t\tif (!(app instanceof _app_js__WEBPACK_IMPORTED_MODULE_0__[\"App\"])) throw new TypeError();\r\n\t\tthis.app = app;\r\n\t\tthis.gl = this.app.gl;\r\n\t\tthis.frame_buffer = null;\r\n\t\tthis.texture = null;\r\n\t\tthis.tmp_current_frame = null;\r\n\t\tthis.resize(width, height, format, type);\r\n\t}\r\n\tresize(width, height, format = null, type = null) {\r\n\t\tif ((typeof (width) !== \"number\") || (typeof (height) !== \"number\")) throw new TypeError();\r\n\t\tif ((this.width === width) && (this.height === height)) return;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tif (this.frame_buffer !== null) this.delete();\r\n\t\tthis.frame_buffer = this.gl.createFramebuffer();\r\n\t\tthis.texture = new _texture_js__WEBPACK_IMPORTED_MODULE_1__[\"Texture\"](this.app, this.width, this.height, format, type);\r\n\t\tthis.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.frame_buffer);\r\n\t\tthis.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this.texture.texture_buffer, 0);\r\n\t\tthis.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\r\n\t}\r\n\tbeginDraw() {\r\n\t\tif (this.frame_buffer === null) return;\r\n\t\tthis.tmp_current_frame = this.app.current_frame;\r\n\t\tthis.app.current_frame = this;\r\n\t\tthis.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.frame_buffer);\r\n\t\tthis.gl.viewport(0, 0, this.width, this.height);\r\n\t}\r\n\tendDraw() {\r\n\t\tthis.app.current_frame = this.tmp_current_frame;\r\n\t\tlet frame_buffer = (this.app.current_frame !== null) ? this.app.current_frame.frame_buffer : null;\r\n\t\tthis.gl.bindFramebuffer(this.gl.FRAMEBUFFER, frame_buffer);\r\n\t\tthis.gl.viewport(0, 0, this.app.width, this.app.height);\r\n\t}\r\n\tread(pixels, left = 0, top = 0, width = this.width, height = this.height) {\r\n\t\tif (this.frame_buffer === null) return;\r\n\t\tthis.beginDraw();\r\n\t\tthis.gl.readPixels(left, top, width, height, this.texture.format, this.texture.type, pixels);\r\n\t\tthis.endDraw();\r\n\t}\r\n\tdelete() {\r\n\t\tthis.gl.deleteFramebuffer(this.frame_buffer);\r\n\t\tthis.frame_buffer = null;\r\n\t\tthis.texture.delete();\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/core/frame.js?");

/***/ }),

/***/ "./src/webgl/core/shader.js":
/*!**********************************!*\
  !*** ./src/webgl/core/shader.js ***!
  \**********************************/
/*! exports provided: Shader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shader\", function() { return Shader; });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.js */ \"./src/webgl/core/app.js\");\n/* harmony import */ var _texture_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./texture.js */ \"./src/webgl/core/texture.js\");\n\r\n\r\n\r\nconst Shader = class {\r\n\tconstructor(app) {\r\n\t\tif (!(app instanceof _app_js__WEBPACK_IMPORTED_MODULE_0__[\"App\"])) throw new TypeError();\r\n\t\tthis.app = app;\r\n\t\tthis.gl = this.app.gl;\r\n\t\tthis.program = null;\r\n\t\tthis.attributes_type = {};\r\n\t\tthis.uniforms_type = {};\r\n\t\tthis.attributes_location = {};\r\n\t\tthis.uniforms_location = {};\r\n\t\tthis.texture_unit_num = {};\r\n\t\tthis.default_shader = {\r\n\t\t\tvertex: `\r\n\t\t\t\t\tprecision highp float;\r\n\t\t\t\t\tattribute vec3 position;\r\n\t\t\t\t\tattribute vec2 uv;\r\n\t\t\t\t\tattribute vec4 color;\r\n\t\t\t\t\tuniform mat4 matrix;\r\n\t\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\t\tvarying vec4 vColor;\r\n\r\n\t\t\t\t\tvoid main(void) {\r\n\t\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\t\tvColor = color;\r\n\t\t\t\t\t\tgl_Position = matrix * vec4(position, 1.0);\r\n\t\t\t\t\t}\r\n\t\t\t\t`,\r\n\t\t\tfragment: `\r\n\t\t\t\t\tprecision highp float;\r\n\t\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\t\tvarying vec4 vColor;\r\n\r\n\t\t\t\t\tvoid main(void){\r\n\t\t\t\t\t\tgl_FragColor = vColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t`\r\n\t\t};\r\n\t}\r\n\tloadDefaultShader() {\r\n\t\tthis.loadShader(this.default_shader.vertex, this.default_shader.fragment);\r\n\t}\r\n\tloadShader(vertex_source, fragment_source) {\r\n\t\t// check the type of code is string\r\n\t\tif (typeof (vertex_source) !== \"string\") throw new TypeError();\r\n\t\tif (typeof (fragment_source) !== \"string\") throw new TypeError();\r\n\t\t// compile shaders\r\n\t\t// vertex\r\n\t\tlet vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER); // create empty Shader object\r\n\t\tthis.gl.shaderSource(vertexShader, vertex_source); // bind Shader source code to empty shader object\r\n\t\tthis.gl.compileShader(vertexShader); // compile Shader\r\n\t\tif (!this.gl.getShaderParameter(vertexShader, this.gl.COMPILE_STATUS)) { // get compile response\r\n\t\t\tlet error = \"vertex shader : \\n\" + this.gl.getShaderInfoLog(vertexShader);\r\n\t\t\tthis.gl.deleteShader(vertexShader);\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\t// fragment\r\n\t\tlet fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n\t\tthis.gl.shaderSource(fragmentShader, fragment_source);\r\n\t\tthis.gl.compileShader(fragmentShader);\r\n\t\tif (!this.gl.getShaderParameter(fragmentShader, this.gl.COMPILE_STATUS)) {\r\n\t\t\tlet error = \"fragment shader : \\n\" + this.gl.getShaderInfoLog(fragmentShader);\r\n\t\t\tthis.gl.deleteShader(vertexShader);\r\n\t\t\tthis.gl.deleteShader(fragmentShader);\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\t// bind Shader to program\r\n\t\tlet program = this.gl.createProgram(); // create empty program\r\n\t\tthis.gl.attachShader(program, vertexShader); // bind vertex shader\r\n\t\tthis.gl.attachShader(program, fragmentShader); // bind fragment shader\r\n\t\tthis.gl.deleteShader(vertexShader);\r\n\t\tthis.gl.deleteShader(fragmentShader);\r\n\t\tthis.gl.linkProgram(program); // link program\r\n\t\tif (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) { // get link response\r\n\t\t\tlet error = \"program : \\n\" + this.gl.getProgramInfoLog(program);\r\n\t\t\tthis.gl.deleteProgram(program);\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\tif (this.program !== null) this.gl.deleteProgram(this.program);\r\n\t\tthis.program = program;\r\n\t\tthis.gl.useProgram(this.program); // use this progam\r\n\t\t// get variables info\r\n\t\tthis.attributes_type = this.findVariable(vertex_source, \"attribute\");\r\n\t\tthis.uniforms_type = this.findVariable(vertex_source + \"\\n\" + fragment_source, \"uniform\");\r\n\t\tlet current_texture_unit = 0;\r\n\t\tfor (let i in this.attributes_type) {\r\n\t\t\tthis.attributes_location[i] = this.gl.getAttribLocation(this.program, i);\r\n\t\t}\r\n\t\tfor (let i in this.uniforms_type) {\r\n\t\t\tthis.uniforms_location[i] = this.gl.getUniformLocation(this.program, i);\r\n\t\t\tif (this.uniforms_type[i] === \"sampler2D\") {\r\n\t\t\t\tthis.texture_unit_num[i] = parseInt(current_texture_unit);\r\n\t\t\t\tcurrent_texture_unit++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn \"\";\r\n\t}\r\n\t// How to use set()\r\n\t//  set(name, x);\r\n\t//  set(name, x, y);\r\n\t//  set(name, x, y, z);\r\n\t//  set(name, x, y, z, w);\r\n\t//  set(name, [mat]);\r\n\t//  set(name, texture(GLCore.Texture));\r\n\tset(name, x, y = null, z = null, w = null) {\r\n\t\tif (!(name in this.uniforms_type)) throw new RangeError();\r\n\t\tthis.gl.useProgram(this.program);\r\n\t\tswitch (this.uniforms_type[name]) {\r\n\t\t\tcase \"int\":\r\n\t\t\t\tif (typeof (x) !== \"number\") throw new TypeError();\r\n\t\t\t\tthis.gl.uniform1i(this.uniforms_location[name], x);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"ivec2\":\r\n\t\t\t\tif ((typeof (x) !== \"number\") || (typeof (y) !== \"number\")) throw new TypeError();\r\n\t\t\t\tthis.gl.uniform2i(this.uniforms_location[name], x, y);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"ivec3\":\r\n\t\t\t\tif ((typeof (x) !== \"number\") || (typeof (y) !== \"number\") || (typeof (z) !== \"number\")) throw new TypeError();\r\n\t\t\t\tthis.gl.uniform3i(this.uniforms_location[name], x, y, z);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"ivec4\":\r\n\t\t\t\tif ((typeof (x) !== \"number\") || (typeof (y) !== \"number\") || (typeof (z) !== \"number\") || (typeof (w) !== \"number\")) throw new TypeError();\r\n\t\t\t\tthis.gl.uniform4i(this.uniforms_location[name], x, y, z, w);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"float\":\r\n\t\t\t\tif (typeof (x) !== \"number\") throw new TypeError();\r\n\t\t\t\tthis.gl.uniform1f(this.uniforms_location[name], x);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"vec2\":\r\n\t\t\t\tif ((typeof (x) !== \"number\") || (typeof (y) !== \"number\")) throw new TypeError();\r\n\t\t\t\tthis.gl.uniform2f(this.uniforms_location[name], x, y);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"vec3\":\r\n\t\t\t\tif ((typeof (x) !== \"number\") || (typeof (y) !== \"number\") || (typeof (z) !== \"number\")) throw new TypeError();\r\n\t\t\t\tthis.gl.uniform3f(this.uniforms_location[name], x, y, z);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"vec4\":\r\n\t\t\t\tif ((typeof (x) !== \"number\") || (typeof (y) !== \"number\") || (typeof (z) !== \"number\") || (typeof (w) !== \"number\")) throw new TypeError();\r\n\t\t\t\tthis.gl.uniform4f(this.uniforms_location[name], x, y, z, w);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mat2\":\r\n\t\t\t\tthis.gl.uniformMatrix2fv(this.uniforms_location[name], false, x);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mat3\":\r\n\t\t\t\tthis.gl.uniformMatrix3fv(this.uniforms_location[name], false, x);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"mat4\":\r\n\t\t\t\tthis.gl.uniformMatrix4fv(this.uniforms_location[name], false, x);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"sampler2D\":\r\n\t\t\t\tif (!(x instanceof _texture_js__WEBPACK_IMPORTED_MODULE_1__[\"Texture\"])) throw new TypeError();\r\n\t\t\t\tif (x.texture_buffer === null) throw new ReferenceError(\"this texture is empty.\");\r\n\t\t\t\tthis.gl.activeTexture(this.gl[\"TEXTURE\" + this.texture_unit_num[name].toString()]);\r\n\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, x.texture_buffer);\r\n\t\t\t\tthis.gl.uniform1i(this.uniforms_location[name], this.texture_unit_num[name]);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\tfindVariable(code, modifier) {\r\n\t\t// delete comments\r\n\t\tlet comments = /\\/\\*[\\s\\S]*?\\*\\/|\\/\\/.*/g;\r\n\t\tlet tmp_code = code.replace(comments, \"\");\r\n\t\t// search all variables\r\n\t\tlet target = new RegExp(modifier + \"[^;]+;\", \"g\");\r\n\t\tlet tmp_variables = tmp_code.match(target);\r\n\t\t// get type and name\r\n\t\tlet word = /[\\w_]+/g;\r\n\t\tlet variables = {};\r\n\t\tfor (let i of tmp_variables) {\r\n\t\t\tlet tmp = i.match(word);\r\n\t\t\tif (tmp === null) continue;\r\n\t\t\tif (tmp.length < 3) continue;\r\n\t\t\tvariables[tmp[2]] = tmp[1];\r\n\t\t\tif (tmp.length > 3) variables[tmp[2]] += \"[\" + tmp[3] + \"]\";\r\n\t\t}\r\n\t\treturn variables;\r\n\t}\r\n\tdelete(){\r\n\t\tthis.gl.deleteProgram(this.program);\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/core/shader.js?");

/***/ }),

/***/ "./src/webgl/core/shape.js":
/*!*********************************!*\
  !*** ./src/webgl/core/shape.js ***!
  \*********************************/
/*! exports provided: Shape */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shape\", function() { return Shape; });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.js */ \"./src/webgl/core/app.js\");\n/* harmony import */ var _utils_math_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/math.js */ \"./src/webgl/utils/math.js\");\n/* harmony import */ var _shader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shader.js */ \"./src/webgl/core/shader.js\");\n\r\n\r\n\r\n\r\nconst Shape = class {\r\n\tconstructor(app) {\r\n\t\tif (!(app instanceof _app_js__WEBPACK_IMPORTED_MODULE_0__[\"App\"])) throw new TypeError();\r\n\t\tthis.app = app;\r\n\t\tthis.gl = this.app.gl;\r\n\t\tthis.mode;\r\n\t\tthis.loop;\r\n\t\tthis.weight;\r\n\t\tthis.vertices = [];\r\n\t\tthis.vertices_buffer = this.gl.createBuffer();\r\n\t\tthis.r = 0.0; this.g = 0.0; this.b = 0.0; this.a = 1.0;\r\n\t}\r\n\t// シェイプの描画開始関数(以降に呼ばれるvertex関数で頂点を登録)\r\n\tbeginShape(mode = this.gl.LINE_STRIP) {\r\n\t\tthis.mode = mode;\r\n\t\tthis.vertices = [];\r\n\t}\r\n\t// シェイプの描画終了関数\r\n\tendShape() {\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertices_buffer);\r\n\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(this.vertices), this.gl.DYNAMIC_DRAW);\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\r\n\t}\r\n\t// シェイプの描画関数\r\n\tdrawShape(shader) {\r\n\t\tif (!(shader instanceof _shader_js__WEBPACK_IMPORTED_MODULE_2__[\"Shader\"])) throw new TypeError();\r\n\t\tif (!(\"position\" in shader.attributes_location)) { console.error(\"attributes position does not exist in vectex shader.\"); return; }\r\n\t\tif (!(\"uv\" in shader.attributes_location)) { console.error(\"attributes uv does not exist in vectex shader.\"); return; }\r\n\t\tif (!(\"color\" in shader.attributes_location)) { console.error(\"attributes color does not exist in vectex shader.\"); return; }\r\n\t\tthis.gl.useProgram(shader.program);\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertices_buffer);\r\n\t\tthis.gl.enableVertexAttribArray(shader.attributes_location[\"position\"]);\r\n\t\tthis.gl.enableVertexAttribArray(shader.attributes_location[\"uv\"]);\r\n\t\tthis.gl.enableVertexAttribArray(shader.attributes_location[\"color\"]);\r\n\t\tthis.gl.vertexAttribPointer(shader.attributes_location[\"position\"], 3, this.gl.FLOAT, false, 9 * 4, 0 * 4);\r\n\t\tthis.gl.vertexAttribPointer(shader.attributes_location[\"uv\"], 2, this.gl.FLOAT, false, 9 * 4, 3 * 4);\r\n\t\tthis.gl.vertexAttribPointer(shader.attributes_location[\"color\"], 4, this.gl.FLOAT, false, 9 * 4, 5 * 4);\r\n\t\tthis.gl.drawArrays(this.mode, 0, this.vertices.length / 9);\r\n\t\tthis.gl.disableVertexAttribArray(shader.attributes_location[\"position\"]);\r\n\t\tthis.gl.disableVertexAttribArray(shader.attributes_location[\"uv\"]);\r\n\t\tthis.gl.disableVertexAttribArray(shader.attributes_location[\"color\"]);\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\r\n\t}\r\n\t// 頂点追加関数(beginShape()-endShape()の間、もしくはbeginWeightShape()-endWeightShape()の間で実行する)\r\n\tvertex(x, y, z, u = 0.0, v = 0.0) {\r\n\t\tx = parseFloat(x);\r\n\t\ty = parseFloat(y);\r\n\t\tz = parseFloat(z);\r\n\t\tu = parseFloat(u);\r\n\t\tv = parseFloat(v);\r\n\t\tArray.prototype.push.apply(this.vertices, [\r\n\t\t\tx, y, z,\r\n\t\t\tu, v,\r\n\t\t\tthis.r, this.g, this.b, this.a\r\n\t\t]);\r\n\t}\r\n\t// 頂点色指定関数(vertex()の直線で実行)\r\n\tcolor(r, g, b, a = 1.0) {\r\n\t\tr = parseFloat(r);\r\n\t\tg = parseFloat(g);\r\n\t\tb = parseFloat(b);\r\n\t\ta = parseFloat(a);\r\n\t\tthis.r = r; this.g = g; this.b = b; this.a = a;\r\n\t}\r\n\t// 太さの指定が可能なbeginShape()\r\n\tbeginWeightShape(weight, loop = false) {\r\n\t\tthis.beginShape(this.gl.TRIANGLE_STRIP);\r\n\t\tthis.weight = weight;\r\n\t\tthis.loop = loop;\r\n\t}\r\n\t// beginWeightShape()の終了\r\n\tendWeightShape(){\r\n\r\n\t\t// 頂点をループさせるかどうかの判定\r\n\t\tif (this.loop) {\r\n\t\t\tArray.prototype.push.apply(this.vertices, this.vertices.slice(0, 9));\r\n\t\t}\r\n\r\n\t\t// 頂点情報を一時変数に代入\r\n\t\tconst tmp_vertices = this.vertices.slice();\r\n\r\n\t\t// 一旦vertecesを空にしてendShapeを呼び、再度beginShapeを開始\r\n\t\tthis.vertices = [];\r\n\t\tthis.endShape();\r\n\t\tthis.beginShape(this.gl.TRIANGLE_STRIP);\r\n\r\n\t\t// 線の本数分ループ\r\n\t\tfor (let i = 0; i < (tmp_vertices.length / 9) - 1; i++){\r\n\r\n\t\t\t// 直線の先端の点\r\n\t\t\tconst v1 = tmp_vertices.slice((i + 0) * 9, (i + 1) * 9);\r\n\t\t\tconst p1 = {\r\n\t\t\t\t\"x\": v1[0],\r\n\t\t\t\t\"y\": v1[1]\r\n\t\t\t};\r\n\r\n\t\t\t// 直線の終端の点\r\n\t\t\tconst v2 = tmp_vertices.slice((i + 1) * 9, (i + 2) * 9);\r\n\t\t\tconst p2 = {\r\n\t\t\t\t\"x\": v2[0],\r\n\t\t\t\t\"y\": v2[1]\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// 直線の法線の単位ベクトル\r\n\t\t\tconst normal = _utils_math_js__WEBPACK_IMPORTED_MODULE_1__[\"GLMath\"].getNormalVec(p1, p2);\r\n\r\n\t\t\t// 生成される直線の先端の上側\r\n\t\t\tconst p1_up = {\r\n\t\t\t\t\"x\": p1.x + normal.x * this.weight,\r\n\t\t\t\t\"y\": p1.y + normal.y * this.weight,\r\n\t\t\t};\r\n\t\t\tconst v1_up = v1.slice(); v1_up[0] = p1_up.x; v1_up[1] = p1_up.y;\r\n\t\t\tArray.prototype.push.apply(this.vertices, v1_up);\r\n\t\t\t// 生成される直線の先端の下側\r\n\t\t\tconst p1_dw = {\r\n\t\t\t\t\"x\": p1.x - normal.x * this.weight,\r\n\t\t\t\t\"y\": p1.y - normal.y * this.weight,\r\n\t\t\t};\r\n\t\t\tconst v1_dw = v1.slice(); v1_dw[0] = p1_dw.x; v1_dw[1] = p1_dw.y;\r\n\t\t\tArray.prototype.push.apply(this.vertices, v1_dw);\r\n\t\t\t// 生成される直線の終端の上側\r\n\t\t\tconst p2_up = {\r\n\t\t\t\t\"x\": p2.x + normal.x * this.weight,\r\n\t\t\t\t\"y\": p2.y + normal.y * this.weight,\r\n\t\t\t};\r\n\t\t\tconst v2_up = v2.slice(); v2_up[0] = p2_up.x; v2_up[1] = p2_up.y;\r\n\t\t\tArray.prototype.push.apply(this.vertices, v2_up);\r\n\t\t\t// 生成される直線の終端の上側\r\n\t\t\tconst p2_dw = {\r\n\t\t\t\t\"x\": p2.x - normal.x * this.weight,\r\n\t\t\t\t\"y\": p2.y - normal.y * this.weight,\r\n\t\t\t};\r\n\t\t\tconst v2_dw = v2.slice(); v2_dw[0] = p2_dw.x; v2_dw[1] = p2_dw.y;\r\n\t\t\tArray.prototype.push.apply(this.vertices, v2_dw);\r\n\r\n\t\t}\r\n\r\n\t\t// 頂点をループさせる場合、先端と終端を結合する\r\n\t\tif (this.loop) {\r\n\t\t\tArray.prototype.push.apply(this.vertices, this.vertices.slice(0, 18));\r\n\t\t}\r\n\r\n\t\t// 描画\r\n\t\tthis.endShape();\r\n\t}\r\n\tdelete() {\r\n\t\tthis.gl.deleteBuffer(this.vertices_buffer);\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/core/shape.js?");

/***/ }),

/***/ "./src/webgl/core/texture.js":
/*!***********************************!*\
  !*** ./src/webgl/core/texture.js ***!
  \***********************************/
/*! exports provided: Texture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Texture\", function() { return Texture; });\n/* harmony import */ var _app_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app.js */ \"./src/webgl/core/app.js\");\n\r\n\r\nconst Texture = class {\r\n\tconstructor(app, width, height, format = null, type = null) {\r\n\t\tif (!(app instanceof _app_js__WEBPACK_IMPORTED_MODULE_0__[\"App\"])) throw new TypeError();\r\n\t\tthis.app = app;\r\n\t\tthis.gl = this.app.gl;\r\n\t\tthis.texture_buffer = null;\r\n\t\tthis.text_canvas = document.createElement(\"canvas\");\r\n\t\tthis.text_2d = this.text_canvas.getContext(\"2d\");\r\n\t\tthis.resize(width, height, format, type);\r\n\t}\r\n\tresize(width = 1, height = 1, format = null, type = null) {\r\n\t\tif ((typeof (width) !== \"number\") || (typeof (height) !== \"number\")) throw new TypeError();\r\n\t\tif ((this.width === width) && (this.height === height)) return;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.pow2_width = parseInt(Math.pow(2, Math.ceil(Math.log2(this.width))));\r\n\t\tthis.pow2_height = parseInt(Math.pow(2, Math.ceil(Math.log2(this.height))));\r\n\t\tthis.format = (format === null) ? this.gl.RGBA : format;\r\n\t\tthis.type = (type === null) ? this.gl.UNSIGNED_BYTE : type;\r\n\t\tif (this.texture_buffer !== null) this.delete();\r\n\t\tthis.texture_buffer = this.gl.createTexture();\r\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.texture_buffer);\r\n\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\r\n\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\r\n\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.REPEAT);\r\n\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.REPEAT);\r\n\t\tthis.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.format, this.pow2_width, this.pow2_height, 0, this.format, this.type, null);\r\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, null);\r\n\t}\r\n\tupdate(pixels, left = 0, top = 0, width = this.width, height = this.height) {\r\n\t\tif ((typeof (left) !== \"number\") || (typeof (top) !== \"number\") || (typeof (width) !== \"number\") || (typeof (height) !== \"number\")) throw new TypeError();\r\n\t\tif (this.texture_buffer === null) return;\r\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.texture_buffer);\r\n\t\tthis.gl.texSubImage2D(this.gl.TEXTURE_2D, 0, left, top, width, height, this.format, this.type, pixels);\r\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, null);\r\n\t}\r\n\tloadImg(src, callback = null) {\r\n\t\tlet img = new Image();\r\n\t\timg.onload = () => {\r\n\t\t\tthis.resize(img.width, img.height);\r\n\t\t\tthis.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.texture_buffer);\r\n\t\t\tthis.gl.texSubImage2D(this.gl.TEXTURE_2D, 0, 0, 0, this.format, this.type, img);\r\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, null);\r\n\t\t\tif (callback !== null) callback();\r\n\t\t}\r\n\t\timg.src = src;\r\n\t}\r\n\tloadText(text, color = \"#000000\", font = \"10px sans-serif\") {\r\n\t\tthis.text_2d.textAlign = \"left\";\r\n\t\tthis.text_2d.textBaseline = \"top\";\r\n\t\tthis.text_2d.fillStyle = color;\r\n\t\tthis.text_2d.font = font;\r\n\t\tconst text_stat = this.text_2d.measureText(text);\r\n\t\tconst text_width = Math.max(1, Math.ceil(text_stat.width));\r\n\t\tconst text_height = Math.max(1, Math.ceil(Math.abs(text_stat.actualBoundingBoxDescent - text_stat.actualBoundingBoxAscent)));\r\n\t\tif ((this.text_canvas.width !== text_width) || (this.text_canvas.height !== text_height)) {\r\n\t\t\tthis.text_canvas.width = text_width;\r\n\t\t\tthis.text_canvas.height = text_height;\r\n\t\t}\r\n\t\tthis.text_2d.clearRect(0, 0, text_width, text_height);\r\n\t\tthis.text_2d.textAlign = \"left\";\r\n\t\tthis.text_2d.textBaseline = \"top\";\r\n\t\tthis.text_2d.fillStyle = color;\r\n\t\tthis.text_2d.font = font;\r\n\t\tthis.text_2d.fillText(text, 0, 0);\r\n\t\tthis.resize(this.text_canvas.width, this.text_canvas.height);\r\n\t\tthis.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.texture_buffer);\r\n\t\tthis.gl.texSubImage2D(this.gl.TEXTURE_2D, 0, 0, 0, this.format, this.type, this.text_canvas);\r\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, null);\r\n\t}\r\n\tdelete() {\r\n\t\tthis.gl.deleteTexture(this.texture_buffer);\r\n\t\tthis.texture_buffer = null;\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/core/texture.js?");

/***/ }),

/***/ "./src/webgl/graphics.js":
/*!*******************************!*\
  !*** ./src/webgl/graphics.js ***!
  \*******************************/
/*! exports provided: Graphics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Graphics\", function() { return Graphics; });\n/* harmony import */ var _core_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/core.js */ \"./src/webgl/core/core.js\");\n/* harmony import */ var _utils_math_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/math.js */ \"./src/webgl/utils/math.js\");\n\r\n\r\n\r\nconst Graphics = class {\r\n\tconstructor(canvas) {\r\n\t\tthis.gapp = new _core_core_js__WEBPACK_IMPORTED_MODULE_0__[\"GLCore\"].App(canvas);\r\n\t\tthis.width = this.gapp.width;\r\n\t\tthis.height = this.gapp.height;\r\n\t\tthis.gshape = this.createShape();\r\n\t\tthis.shaders = {\r\n\t\t\tnormal: this.createShader(),\r\n\t\t\ttexture: this.createShader()\r\n\t\t};\r\n\t\tthis.shaders.normal.loadDefaultShader();\r\n\t\tthis.shaders.texture.loadShader(this.shaders.texture.default_shader.vertex, `\r\n\t\t\t\t\tprecision highp float;\r\n\t\t\t\t\tuniform sampler2D texture;\r\n\t\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\t\tvarying vec4 vColor;\r\n\r\n\t\t\t\t\tvoid main(void){\r\n\t\t\t\t\t\tgl_FragColor = texture2D(texture, vUv);\r\n\t\t\t\t\t}\r\n\t\t\t\t`);\r\n\t\tthis.current_shader = this.shaders.normal;\r\n\t\tthis.stroke_weight = 1.0;\r\n\t\tthis.colors = {\r\n\t\t\tfill: { r: 0, g: 0, b: 0, a: 1 },\r\n\t\t\tstroke: { r: 0, g: 0, b: 0, a: 1 }\r\n\t\t}\r\n\t\tthis.current_matrix = new _utils_math_js__WEBPACK_IMPORTED_MODULE_1__[\"GLMath\"].mat4();\r\n\t\tthis.current_matrix_backup = [];\r\n\t}\r\n\tcreateShape() { return new _core_core_js__WEBPACK_IMPORTED_MODULE_0__[\"GLCore\"].Shape(this.gapp); }\r\n\tcreateShader() { return new _core_core_js__WEBPACK_IMPORTED_MODULE_0__[\"GLCore\"].Shader(this.gapp); }\r\n\tcreateTexture(width, height, format = null, type = null) { return new _core_core_js__WEBPACK_IMPORTED_MODULE_0__[\"GLCore\"].Texture(this.gapp, width, height, format, type); }\r\n\tcreateFrame(width, height, format = null, type = null) { return new _core_core_js__WEBPACK_IMPORTED_MODULE_0__[\"GLCore\"].Frame(this.gapp, width, height, format, type); }\r\n\tstrokeWeight(weight) { this.stroke_weight = weight; }\r\n\tfill(r = 0.0, g = 0.0, b = 0.0, a = 1.0) { this.colors.fill = { r, g, b, a }; }\r\n\tstroke(r = 0.0, g = 0.0, b = 0.0, a = 1.0) { this.colors.stroke = { r, g, b, a }; }\r\n\tshader(shader) { this.current_shader = shader; };\r\n\tpushMatrix(){ \r\n\t\tthis.current_matrix_backup.push(new _utils_math_js__WEBPACK_IMPORTED_MODULE_1__[\"GLMath\"].mat4());\r\n\t\tthis.current_matrix_backup[this.current_matrix_backup.length - 1].set(this.current_matrix);\r\n\t}\r\n\tpopMatrix() { \r\n\t\tif (this.current_matrix_backup.length === 0) return;\r\n\t\tthis.current_matrix.set(this.current_matrix_backup.pop());\r\n\t}\r\n\ttranslate(x = 0, y = 0, z = 0){ this.current_matrix.translate(x, y, z); }\r\n\tscale(x = 1, y = 1, z = 1, cx = 0, cy = 0, cz = 0){ this.current_matrix.scale(x, y, z, cx, cy, cz); }\r\n\tshape(shape) {\r\n\t\tlet w, h;\r\n\t\tif (this.gapp.current_frame === null) { w = this.gapp.width; h = this.gapp.height; }\r\n\t\telse { w = this.gapp.current_frame.width; h = this.gapp.current_frame.height; }\r\n\t\tlet m = new _utils_math_js__WEBPACK_IMPORTED_MODULE_1__[\"GLMath\"].mat4(\r\n\t\t\t2 / w, 0, 0, -1,\r\n\t\t\t0, -2 / h, 0, 1,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\t\tm.rmul(this.current_matrix);\r\n\t\tthis.current_shader.set(\"matrix\", m.arr);\r\n\t\tshape.drawShape(this.current_shader);\r\n\t}\r\n\trect(x, y, width, height, r = 0.0, div = 8) {\r\n\t\tconst add_vertecis = () => {\r\n\t\t\tif (r === 0.0){\r\n\t\t\t\tthis.gshape.vertex(x, y, 0, 0, 0);\r\n\t\t\t\tthis.gshape.vertex(x + width, y, 0, 1, 0);\r\n\t\t\t\tthis.gshape.vertex(x + width, y + height, 0, 1, 1);\r\n\t\t\t\tthis.gshape.vertex(x, y + height, 0, 0, 1);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.gshape.vertex(x + r, y, 0, 0, 0);\r\n\t\t\t\tthis.gshape.vertex(x + width - r, y, 0, 1, 0);\r\n\t\t\t\tfor(let i = 1; i < div - 1; i++) this.gshape.vertex(\r\n\t\t\t\t\tx + width  - r + r * Math.cos(2.0 * Math.PI * (0.75 + i / (div * 4))),\r\n\t\t\t\t\ty\t\t  + r + r * Math.sin(2.0 * Math.PI * (0.75 + i / (div * 4))),\r\n\t\t\t\t\t0, 1, 0\r\n\t\t\t\t);\r\n\t\t\t\tthis.gshape.vertex(x + width, y + r, 0, 1, 0);\r\n\t\t\t\tthis.gshape.vertex(x + width, y + height - r, 0, 1, 1);\r\n\t\t\t\tfor(let i = 1; i < div - 1; i++) this.gshape.vertex(\r\n\t\t\t\t\tx + width  - r + r * Math.cos(2.0 * Math.PI * (0.00 + i / (div * 4))),\r\n\t\t\t\t\ty + height - r + r * Math.sin(2.0 * Math.PI * (0.00 + i / (div * 4))),\r\n\t\t\t\t\t0, 1, 0\r\n\t\t\t\t);\r\n\t\t\t\tthis.gshape.vertex(x + width - r, y + height, 0, 1, 1);\r\n\t\t\t\tthis.gshape.vertex(x + r, y + height, 0, 0, 1);\r\n\t\t\t\tfor(let i = 1; i < div - 1; i++) this.gshape.vertex(\r\n\t\t\t\t\tx\t\t  + r + r * Math.cos(2.0 * Math.PI * (0.25 + i / (div * 4))),\r\n\t\t\t\t\ty + height - r + r * Math.sin(2.0 * Math.PI * (0.25 + i / (div * 4))),\r\n\t\t\t\t\t0, 1, 0\r\n\t\t\t\t);\r\n\t\t\t\tthis.gshape.vertex(x, y + height - r, 0, 0, 1);\r\n\t\t\t\tthis.gshape.vertex(x, y + r, 0, 0, 0);\r\n\t\t\t\tfor(let i = 1; i < div - 1; i++) this.gshape.vertex(\r\n\t\t\t\t\tx\t\t  + r + r * Math.cos(2.0 * Math.PI * (0.50 + i / (div * 4))),\r\n\t\t\t\t\ty\t\t  + r + r * Math.sin(2.0 * Math.PI * (0.50 + i / (div * 4))),\r\n\t\t\t\t\t0, 1, 0\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (this.colors.fill.a !== 0.0) {\r\n\t\t\tthis.gshape.beginShape(this.gshape.gl.TRIANGLE_FAN);\r\n\t\t\tthis.gshape.color(this.colors.fill.r, this.colors.fill.g, this.colors.fill.b, this.colors.fill.a);\r\n\t\t\tadd_vertecis();\r\n\t\t\tthis.gshape.endShape();\r\n\t\t\tthis.shape(this.gshape);\r\n\t\t}\r\n\t\tif ((this.stroke_weight > 0.0) && (this.colors.stroke.a !== 0.0)) {\r\n\t\t\tthis.gshape.beginWeightShape(this.stroke_weight, true);\r\n\t\t\tthis.gshape.color(this.colors.stroke.r, this.colors.stroke.g, this.colors.stroke.b, this.colors.stroke.a);\r\n\t\t\tadd_vertecis();\r\n\t\t\tthis.gshape.endWeightShape();\r\n\t\t\tthis.shape(this.gshape);\r\n\t\t}\r\n\t}\r\n\tline(x1, y1, x2, y2) {\r\n\t\tthis.gshape.beginWeightShape(this.stroke_weight);\r\n\t\tthis.gshape.color(this.colors.stroke.r, this.colors.stroke.g, this.colors.stroke.b, this.colors.stroke.a);\r\n\t\tthis.gshape.vertex(x1, y1, 0, 1, 0);\r\n\t\tthis.gshape.vertex(x2, y2, 0, 0, 1);\r\n\t\tthis.gshape.endWeightShape();\r\n\t\tthis.shape(this.gshape);\r\n\t}\r\n\tbezier(x1, y1, x2, y2, x3, y3, x4, y4, div = 32) {\r\n\t\tthis.gshape.beginWeightShape(this.stroke_weight);\r\n\t\tthis.gshape.color(this.colors.stroke.r, this.colors.stroke.g, this.colors.stroke.b, this.colors.stroke.a);\r\n\t\tfor(let i = 0; i < div + 1; i++){\r\n\t\t\tlet t = i / div;\r\n\t\t\tthis.gshape.vertex(\r\n\t\t\t\t(1 - t) * (1 - t) * (1 - t) * x1 + 3 * (1 - t) * (1 - t) * t * x2 + 3 * (1 - t) * t * t * x3 + t * t * t * x4,\r\n\t\t\t\t(1 - t) * (1 - t) * (1 - t) * y1 + 3 * (1 - t) * (1 - t) * t * y2 + 3 * (1 - t) * t * t * y3 + t * t * t * y4,\r\n\t\t\t\t0, t, 0\r\n\t\t\t);\r\n\t\t}\r\n\t\tthis.gshape.endWeightShape();\r\n\t\tthis.shape(this.gshape);\r\n\t}\r\n\tellipse(x, y, width, height, div = 32) {\r\n\t\tthis.gshape.beginShape(this.gshape.gl.TRIANGLE_FAN);\r\n\t\tthis.gshape.color(this.colors.fill.r, this.colors.fill.g, this.colors.fill.b, this.colors.fill.a);\r\n\t\tfor (let i = 0; i < div; i++) {\r\n\t\t\tthis.gshape.vertex(\r\n\t\t\t\tx + (width / 2) * Math.cos(2 * Math.PI * i / div),\r\n\t\t\t\ty + (height / 2) * Math.sin(2 * Math.PI * i / div),\r\n\t\t\t\t0, 0, 0\r\n\t\t\t);\r\n\t\t}\r\n\t\tthis.gshape.endShape();\r\n\t\tthis.shape(this.gshape);\r\n\r\n\t\tthis.gshape.beginWeightShape(this.stroke_weight, true);\r\n\t\tthis.gshape.color(this.colors.stroke.r, this.colors.stroke.g, this.colors.stroke.b, this.colors.stroke.a);\r\n\t\tfor (let i = 0; i < div; i++) {\r\n\t\t\tthis.gshape.vertex(\r\n\t\t\t\tx + (width / 2) * Math.cos(2 * Math.PI * i / div),\r\n\t\t\t\ty + (height / 2) * Math.sin(2 * Math.PI * i / div),\r\n\t\t\t\t0, 0, 0\r\n\t\t\t);\r\n\t\t}\r\n\t\tthis.gshape.endWeightShape();\r\n\t\tthis.shape(this.gshape);\r\n\t}\r\n\timage(texture, x, y, width, height) {\r\n\t\tlet tmp_current_shader = this.current_shader;\r\n\t\tthis.shader(this.shaders.texture);\r\n\r\n\t\tthis.shaders.texture.set(\"texture\", texture);\r\n\r\n\t\tthis.gshape.beginShape(this.gshape.gl.TRIANGLE_FAN);\r\n\t\tthis.gshape.vertex(x, y, 0, 0, texture.height / texture.pow2_height);\r\n\t\tthis.gshape.vertex(x + width, y, 0, texture.width / texture.pow2_width, texture.height / texture.pow2_height);\r\n\t\tthis.gshape.vertex(x + width, y + height, 0, texture.width / texture.pow2_width, 0);\r\n\t\tthis.gshape.vertex(x, y + height, 0, 0, 0);\r\n\t\tthis.gshape.endShape();\r\n\t\tthis.shape(this.gshape);\r\n\r\n\t\tthis.shader(tmp_current_shader);\r\n\t}\r\n\tclear() { this.gapp.gl.clear(this.gapp.gl.COLOR_BUFFER_BIT | this.gapp.gl.DEPTH_BUFFER_BIT); }\r\n\trender() { this.gapp.render(); }\r\n\tresize(width, height) {\r\n\t\tthis.gapp.resize(width, height);\r\n\t\tthis.width = this.gapp.width;\r\n\t\tthis.height = this.gapp.height;\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/graphics.js?");

/***/ }),

/***/ "./src/webgl/utils/event_listener.js":
/*!*******************************************!*\
  !*** ./src/webgl/utils/event_listener.js ***!
  \*******************************************/
/*! exports provided: EventListener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EventListener\", function() { return EventListener; });\nconst EventListener = class {\r\n\tconstructor() {\r\n\t\tthis.events = {};\r\n\t}\r\n\taddEventListener(name, func) {\r\n\t\t// check the type of name is string\r\n\t\tif (typeof (name) !== \"string\") return;\r\n\t\t// check the type of func is function\r\n\t\tif (typeof (func) !== \"function\") return;\r\n\t\t// check the name is registered\r\n\t\tif (!(name in this.events)) this.events[name] = [];\r\n\t\t// add event listener\r\n\t\tthis.events[name].push(func);\r\n\t}\r\n\ttrigger(name, arg) {\r\n\t\t// check the type of name is string\r\n\t\tif (typeof (name) !== \"string\") return;\r\n\t\t// check the name is registered\r\n\t\tif (!(name in this.events)) return;\r\n\t\t// process all events\r\n\t\tfor (let f of this.events[name]) {\r\n\t\t\tf(arg);\r\n\t\t}\r\n\t}\r\n\tresetEvent(name) {\r\n\t\t// check the type of name is string\r\n\t\tif (typeof (name) !== \"string\") return;\r\n\t\t// check the name is registered\r\n\t\tif (!(name in this.events)) return;\r\n\t\t// reset event listener\r\n\t\tthis.events[name] = [];\r\n\t}\r\n};\n\n//# sourceURL=webpack:///./src/webgl/utils/event_listener.js?");

/***/ }),

/***/ "./src/webgl/utils/math.js":
/*!*********************************!*\
  !*** ./src/webgl/utils/math.js ***!
  \*********************************/
/*! exports provided: GLMath */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GLMath\", function() { return GLMath; });\nconst GLMath = {\r\n\tvec2: class {\r\n\t\tconstructor(x = 0, y = 0) {\r\n\t\t\tthis.arr = new Float32Array(2);\r\n\t\t\tthis.arr[0] = x;\r\n\t\t\tthis.arr[1] = y;\r\n\t\t}\r\n\t\tadd(v) {\r\n\t\t\tthis.arr[0] += v.arr[0];\r\n\t\t\tthis.arr[1] += v.arr[1];\r\n\t\t}\r\n\t\tsub(v) {\r\n\t\t\tthis.arr[0] -= v.arr[0];\r\n\t\t\tthis.arr[1] -= v.arr[1];\r\n\t\t}\r\n\t\tmul(x) {\r\n\t\t\tthis.arr[0] *= x;\r\n\t\t\tthis.arr[1] *= x;\r\n\t\t}\r\n\t\tdiv(x) {\r\n\t\t\tthis.arr[0] /= x;\r\n\t\t\tthis.arr[1] /= x;\r\n\t\t}\r\n\t\tdot(v) {\r\n\t\t\treturn\r\n\t\t\t\tthis.arr[0] * v.arr[0] +\r\n\t\t\t\tthis.arr[1] * v.arr[1];\r\n\t\t}\r\n\t\tabs() {\r\n\t\t\treturn Math.sqrt(\r\n\t\t\t\tMath.pow(this.arr[0], 2) +\r\n\t\t\t\tMath.pow(this.arr[1], 2)\r\n\t\t\t);\r\n\t\t}\r\n\t\tnormalize() {\r\n\t\t\tthis.div(this.abs());\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new this.constructor(\r\n\t\t\t\tthis.arr[0],\r\n\t\t\t\tthis.arr[1]\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\tvec3: class {\r\n\t\tconstructor(x = 0, y = 0, z = 0) {\r\n\t\t\tthis.arr = new Float32Array(3);\r\n\t\t\tthis.arr[0] = x;\r\n\t\t\tthis.arr[1] = y;\r\n\t\t\tthis.arr[2] = z;\r\n\t\t}\r\n\t\tadd(v) {\r\n\t\t\tthis.arr[0] += v.arr[0];\r\n\t\t\tthis.arr[1] += v.arr[1];\r\n\t\t\tthis.arr[2] += v.arr[2];\r\n\t\t}\r\n\t\tsub(v) {\r\n\t\t\tthis.arr[0] -= v.arr[0];\r\n\t\t\tthis.arr[1] -= v.arr[1];\r\n\t\t\tthis.arr[2] -= v.arr[2];\r\n\t\t}\r\n\t\tmul(x) {\r\n\t\t\tthis.arr[0] *= x;\r\n\t\t\tthis.arr[1] *= x;\r\n\t\t\tthis.arr[2] *= x;\r\n\t\t}\r\n\t\tdiv(x) {\r\n\t\t\tthis.arr[0] /= x;\r\n\t\t\tthis.arr[1] /= x;\r\n\t\t\tthis.arr[2] /= x;\r\n\t\t}\r\n\t\tdot(v) {\r\n\t\t\treturn\r\n\t\t\t\tthis.arr[0] * v.arr[0] +\r\n\t\t\t\tthis.arr[1] * v.arr[1] +\r\n\t\t\t\tthis.arr[2] * v.arr[2];\r\n\t\t}\r\n\t\tcross(v){\r\n\t\t\tthis.arr = new Float32Array([\r\n\t\t\t\tthis.arr[1] * v.arr[2] - this.arr[2] * v.arr[1],\r\n\t\t\t\tthis.arr[2] * v.arr[0] - this.arr[0] * v.arr[2],\r\n\t\t\t\tthis.arr[0] * v.arr[1] - this.arr[1] * v.arr[0]\r\n\t\t\t]);\r\n\t\t}\r\n\t\tabs(){\r\n\t\t\treturn Math.sqrt(\r\n\t\t\t\tMath.pow(this.arr[0], 2) +\r\n\t\t\t\tMath.pow(this.arr[1], 2) +\r\n\t\t\t\tMath.pow(this.arr[2], 2)\r\n\t\t\t);\r\n\t\t}\r\n\t\tnormalize() {\r\n\t\t\tthis.div(this.abs());\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new this.constructor(\r\n\t\t\t\tthis.arr[0],\r\n\t\t\t\tthis.arr[1],\r\n\t\t\t\tthis.arr[2]\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\tvec4: class {\r\n\t\tconstructor(x = 0, y = 0, z = 0, w = 1) {\r\n\t\t\tthis.arr = new Float32Array(4);\r\n\t\t\tthis.arr[0] = x;\r\n\t\t\tthis.arr[1] = y;\r\n\t\t\tthis.arr[2] = z;\r\n\t\t\tthis.arr[3] = w;\r\n\t\t}\r\n\t\tadd(v) {\r\n\t\t\tthis.arr[0] += v.arr[0];\r\n\t\t\tthis.arr[1] += v.arr[1];\r\n\t\t\tthis.arr[2] += v.arr[2];\r\n\t\t\tthis.arr[3] += v.arr[3];\r\n\t\t}\r\n\t\tsub(v) {\r\n\t\t\tthis.arr[0] -= v.arr[0];\r\n\t\t\tthis.arr[1] -= v.arr[1];\r\n\t\t\tthis.arr[2] -= v.arr[2];\r\n\t\t\tthis.arr[3] -= v.arr[3];\r\n\t\t}\r\n\t\tmul(x) {\r\n\t\t\tthis.arr[0] *= x;\r\n\t\t\tthis.arr[1] *= x;\r\n\t\t\tthis.arr[2] *= x;\r\n\t\t\tthis.arr[3] *= x;\r\n\t\t}\r\n\t\tdiv(x) {\r\n\t\t\tthis.arr[0] /= x;\r\n\t\t\tthis.arr[1] /= x;\r\n\t\t\tthis.arr[2] /= x;\r\n\t\t\tthis.arr[3] /= x;\r\n\t\t}\r\n\t\tdot(v) {\r\n\t\t\treturn\r\n\t\t\t\tthis.arr[0] * v.arr[0] +\r\n\t\t\t\tthis.arr[1] * v.arr[1] +\r\n\t\t\t\tthis.arr[2] * v.arr[2] +\r\n\t\t\t\tthis.arr[3] * v.arr[3];\r\n\t\t}\r\n\t\tabs() {\r\n\t\t\treturn Math.sqrt(\r\n\t\t\t\tMath.pow(this.arr[0], 2) +\r\n\t\t\t\tMath.pow(this.arr[1], 2) +\r\n\t\t\t\tMath.pow(this.arr[2], 2) +\r\n\t\t\t\tMath.pow(this.arr[3], 2)\r\n\t\t\t);\r\n\t\t}\r\n\t\tnormalize() {\r\n\t\t\tthis.div(this.abs());\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new this.constructor(\r\n\t\t\t\tthis.arr[0],\r\n\t\t\t\tthis.arr[1],\r\n\t\t\t\tthis.arr[2],\r\n\t\t\t\tthis.arr[3]\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\tmat4: class {\r\n\t\tconstructor(\r\n\t\t\tm00 = 1.0, m01 = 0.0, m02 = 0.0, m03 = 0.0,\r\n\t\t\tm10 = 0.0, m11 = 1.0, m12 = 0.0, m13 = 0.0,\r\n\t\t\tm20 = 0.0, m21 = 0.0, m22 = 1.0, m23 = 0.0,\r\n\t\t\tm30 = 0.0, m31 = 0.0, m32 = 0.0, m33 = 1.0,\r\n\t\t) {\r\n\t\t\tthis.arr = new Float32Array([\r\n\t\t\t\tm00, m10, m20, m30,\r\n\t\t\t\tm01, m11, m21, m31,\r\n\t\t\t\tm02, m12, m22, m32,\r\n\t\t\t\tm03, m13, m23, m33\r\n\t\t\t]);\r\n\t\t}\r\n\t\tset(m){\r\n\t\t\tthis.arr = this.arr.map((val, index) => m.arr[index]);\r\n\t\t}\r\n\t\trmul(m) {\r\n\t\t\tlet tmp = new Float32Array(16);\r\n\t\t\tfor(let x = 0; x < 4; x++){\r\n\t\t\t\tfor (let y = 0; y < 4; y++) {\r\n\t\t\t\t\ttmp[y + x * 4] = 0;\r\n\t\t\t\t\tfor(let i = 0; i < 4; i++){\r\n\t\t\t\t\t\ttmp[y + x * 4] += this.arr[y + i * 4] * m.arr[i + x * 4];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.arr = tmp;\r\n\t\t}\r\n\t\tlmul(m) {\r\n\t\t\tlet tmp = new Float32Array(16);\r\n\t\t\tfor (let x = 0; x < 4; x++) {\r\n\t\t\t\tfor (let y = 0; y < 4; y++) {\r\n\t\t\t\t\ttmp[y + x * 4] = 0;\r\n\t\t\t\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ttmp[y + x * 4] += m.arr[y + i * 4] * this.arr[i + x * 4];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.arr = tmp;\r\n\t\t}\r\n\t\ttranslate(x = 0, y = 0, z = 0){\r\n\t\t\tthis.rmul(new GLMath.mat4(\r\n\t\t\t\t1, 0, 0, x,\r\n\t\t\t\t0, 1, 0, y,\r\n\t\t\t\t0, 0, 1, z,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\t\t));\r\n\t\t}\r\n\t\tscale(x = 1, y = 1, z = 1, cx = 0, cy = 0, cz = 0) {\r\n\t\t\tthis.translate(-cx, -cy, -cz);\r\n\t\t\tthis.rmul(new GLMath.mat4(\r\n\t\t\t\tx, 0, 0, 0,\r\n\t\t\t\t0, y, 0, 0,\r\n\t\t\t\t0, 0, z, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\t\t));\r\n\t\t\tthis.translate(cx, cy, cz);\r\n\t\t}\r\n\t},\r\n\t// 2直線の交点を算出する関数\r\n\tgetCrossPos: (pa1, pa2, pb1, pb2) => {\r\n\t\tlet s1 = ((pb2.x - pb1.x) * (pa1.y - pb1.y) - (pb2.y - pb1.y) * (pa1.x - pb1.x)) / 2;\r\n\t\tlet s2 = ((pb2.x - pb1.x) * (pb1.y - pa2.y) - (pb2.y - pb1.y) * (pb1.x - pa2.x)) / 2;\r\n\t\tif (s1 + s2 === 0) return { \"x\": Infinity, \"y\": Infinity };\r\n\t\treturn {\r\n\t\t\t\"x\": pa1.x + (pa2.x - pa1.x) * s1 / (s1 + s2),\r\n\t\t\t\"y\": pa1.y + (pa2.y - pa1.y) * s1 / (s1 + s2)\r\n\t\t};\r\n\t},\r\n\t// 法線の単位ベクトルを算出する関数\r\n\tgetNormalVec: (p1, p2) => {\r\n\t\tlet length = Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\r\n\t\tif (length === 0) return { \"x\": Infinity, \"y\": Infinity };\r\n\t\treturn {\r\n\t\t\t\"x\": (p1.y - p2.y) / length,\r\n\t\t\t\"y\": (p2.x - p1.x) / length\r\n\t\t};\r\n\t}\r\n};\r\n\n\n//# sourceURL=webpack:///./src/webgl/utils/math.js?");

/***/ })

/******/ });